<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>JavaWeb笔记 | 方圆的博客</title><meta name="author" content="方圆"><meta name="copyright" content="方圆"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="自己在学习web知识时候记得一些笔记， 它打通了从前端 &#x3D;&gt; MySQL &#x3D;&gt; Java Web &#x3D;&gt; SSM &#x3D;&gt; Spring Boot &#x3D;&gt; Maven 这一套技术栈">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb笔记">
<meta property="og:url" content="http://www.mfyuan.top/2024/03/25/Java/JavaWeb/index.html">
<meta property="og:site_name" content="方圆的博客">
<meta property="og:description" content="自己在学习web知识时候记得一些笔记， 它打通了从前端 &#x3D;&gt; MySQL &#x3D;&gt; Java Web &#x3D;&gt; SSM &#x3D;&gt; Spring Boot &#x3D;&gt; Maven 这一套技术栈">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_10.webp">
<meta property="article:published_time" content="2024-03-25T09:43:05.000Z">
<meta property="article:modified_time" content="2024-05-22T10:23:35.926Z">
<meta property="article:author" content="方圆">
<meta property="article:tag" content="java">
<meta property="article:tag" content="Web">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_10.webp"><link rel="shortcut icon" href="/img/github-mark.png"><link rel="canonical" href="http://www.mfyuan.top/2024/03/25/Java/JavaWeb/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaWeb笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-05-22 18:23:35'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/touxiang.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">32</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">35</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_10.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="方圆的博客"><span class="site-name">方圆的博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaWeb笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-03-25T09:43:05.000Z" title="发表于 2024-03-25 17:43:05">2024-03-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-22T10:23:35.926Z" title="更新于 2024-05-22 18:23:35">2024-05-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/">java</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/Web/">Web</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">32.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>111分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaWeb笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="JavaWeb开发"><a href="#JavaWeb开发" class="headerlink" title="JavaWeb开发"></a>JavaWeb开发</h1><p>自己在学习web知识时候记得一些笔记，有三万字</p>
<ol>
<li>它打通了从前端 &#x3D;&gt; MySQL &#x3D;&gt; Java Web &#x3D;&gt; SSM &#x3D;&gt; Spring Boot &#x3D;&gt; Maven 这一套技术栈</li>
<li>它包含了像 Postman、MySQL 图形界面等开发工具的使用</li>
<li>它包含了像登录校验（JWT）、文件上传等常见业务的实践</li>
<li>它包含了 AOP 应用、SpringBoot 原理、Maven 高级等进阶知识</li>
</ol>
<h3 id="初识web前端"><a href="#初识web前端" class="headerlink" title="初识web前端"></a>初识web前端</h3><p>用户在浏览器页面输入网址，是如何得到响应的页面数据的？<br>1.浏览器根据请求的URL网址，查看缓存，如果资源未缓存，则<br>2.交给DNS域名解析，转换为服务器的ip地址，向服务器发起请求<br>3.建立tcp连接：三次握手：<br>    第一次握手：客户端向服务端发送数据包，选择一个起始序列号ISN，表示想建立连接<br>    第二次握手：服务端收到客户端的请求后，确认客户端请求发送带确认标记的数据包，也包括服务端的ISN<br>    第三次握手：客户端收到数据包后，明确了从客户端到服务器之间的数据传输的正常的，都确认了对方的ISN<br>    三次握手的目的是：确保双方能够接受和发送数据，同步双方的初始序列号ISN，这样就建立了可靠的链接，可以惊进行后续的通信<br>    在握手的过程中，如果某个阶段数据包丢失或者延迟，tcp协议会等待一段时间后，重新发送和接收数据，直到建立连接或者放弃链接，<br>4.HTTP请求响应：握手建立连接成功后，客户端发起HTTP请求：包含要访问的信息<br>5.服务器处理请求：服务器收到HTTP请求后，根据请求的资源和参数执行相应的处理，会涉及到数据库的查询和业务逻辑的处理<br>6.服务器返回HTTP响应：根据HTTP响应协议，返回包括状态码，响应头，响应体等等<br>7.浏览器接受响应：接收到后，开始处理，解析HTML文件，解析CSS，构建DOM树，布局和绘制，js代码的执行，最终呈现页面等等（涉及到前端的知识）<br>    HTML：负责网页的结构（页面和元素）<br>    CSS：负责网页的表现（页面元素的外观，位置，颜色大小等）<br>    JS：负责网页的行为（交互，动态，逻辑效果等等）</p>
<p>HTML：HyperText Markup Language超文本标记语言，除了文本，还能定义图片，音频，视频等内容</p>
<p>CSS：Cascading Style Sheet 层叠样式表，用于控制页面的样式</p>
<p>JavaScript：跨平台的面向对象的语言，用于网页的交互，不需要编译运行，直接用于浏览器的解释就可以</p>
<p>JSON对象：JavaScript Object Notation，JS对象标记法</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">“key” <span class="punctuation">:</span>value<span class="punctuation">,</span></span><br><span class="line">“key”<span class="punctuation">:</span>value<span class="punctuation">,</span></span><br><span class="line">“key”<span class="punctuation">:</span>value</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>BOM对象：Browser Object model 浏览器对象模型，将js的各个组成部分分装成对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">对象名称	描述</span><br><span class="line">Window	浏览器窗口对象</span><br><span class="line">Navigator	浏览器对象</span><br><span class="line">Screen	屏幕对象</span><br><span class="line">History	历史记录对象</span><br><span class="line">Location	d地址栏对象</span><br></pre></td></tr></table></figure>

<h3 id="Vue概述"><a href="#Vue概述" class="headerlink" title="Vue概述"></a>Vue概述</h3><p>Vue是一套前端框架，免除原生js中的DOM操作，简化书写</p>
<p>基于MVVM的思想：Model-View-ViewModel</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">model：数据模型，特指前端中通过请求从后端获取数据</span><br><span class="line">view：视图，用于展示数据的页面，可以理解成用html+css搭建的页面，但是没有数据</span><br><span class="line">viewmodel：将数据绑定到视图上，负责将数据model通过js的DOM技术，将数据展示到视图上view上</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Vue的快速入门</span><br><span class="line">1.新建HTML页面，引入Vue.js文件</span><br><span class="line">2.在JS代码区域，创建Vue对象，定义数据模型</span><br><span class="line">在创建vue对象时，有几个常用的属性：</span><br><span class="line">- el:  用来指定哪儿些标签受 Vue 管理。 该属性取值 `#app` 中的 `app` 需要是受管理的标签的id属性值</span><br><span class="line">- data: 用来定义数据模型</span><br><span class="line">- methods: 用来定义函数。这个我们在后面就会用到</span><br><span class="line">3.编写视图</span><br><span class="line">差值表达式：&#123;&#123;表达式&#125;&#125;。</span><br><span class="line">Vue常用指令：</span><br><span class="line">Html中带有V-前缀 的特殊属性</span><br></pre></td></tr></table></figure>

<h4 id="Vue生命周期："><a href="#Vue生命周期：" class="headerlink" title="Vue生命周期："></a>Vue生命周期：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">指的是：Vue对象从创建到销毁的全过程，Vue的生命周期包括8个阶段，每触发一个生命周期，就会自动执行一个生命周期的方法</span><br><span class="line">状态	阶段周期</span><br><span class="line">beforeCreate	创建前</span><br><span class="line">created	创建后</span><br><span class="line">beforeMount	挂载前</span><br><span class="line">mounted	挂载完成</span><br><span class="line">beforeUpdate	更新前</span><br><span class="line">updated	更新后</span><br><span class="line">beforeDestroy	销毁前</span><br><span class="line">destroyed	销毁后</span><br></pre></td></tr></table></figure>

<h4 id="Ajax："><a href="#Ajax：" class="headerlink" title="Ajax："></a>Ajax：</h4><p>（Asynchronous JavaScript and XML）</p>
<p>是一种用于在不重新加载整个页面的情况下，通过后台与服务器进行异步通信的技术</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">概念：异步的js和xml</span><br><span class="line">作用：通过Ajax可以给服务端发送请求，并获取服务器相应的数据</span><br><span class="line">异步交互：可以在不重新加载整个页面的情况下，与服务器交换数据并且更新部分网页的数据</span><br><span class="line"></span><br><span class="line">同步：在服务器请求的过程中，浏览器页面不能做其他的操作，只能等待响应结束</span><br><span class="line"></span><br><span class="line">Ajax 的核心是通过 XMLHttpRequest 对象进行数据的异步传输。该对象提供了在后台与服务器交互的方法和属性。通过 open() 方法指定请求的类型、URL 和是否异步，然后使用 send() 方法发送请求。</span><br></pre></td></tr></table></figure>

<h4 id="Axios："><a href="#Axios：" class="headerlink" title="Axios："></a>Axios：</h4><p>对原生Ajax的封装，简化书写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Axios 是一个基于 Promise 的 HTTP 客户端，用于在浏览器和 Node.js 环境中发送 HTTP 请求。它是一个流行的 JavaScript 库，简化了对后端 API 的数据请求和响应处理。Axios 支持浏览器环境和Node.js环境，因此可以在前端和后端同时使用。</span><br></pre></td></tr></table></figure>

<h4 id="YApi"><a href="#YApi" class="headerlink" title="YApi:"></a>YApi:</h4><p>接口文档管理平台</p>
<h4 id="Vue组件库"><a href="#Vue组件库" class="headerlink" title="Vue组件库"></a>Vue组件库</h4><p>Vue组件库Element</p>
<p>Element：饿了么开发，基于Vue2.0的桌面组件库</p>
<p>组件：超链接，按钮，图片，表格表单等</p>
<h4 id="Nginx服务器"><a href="#Nginx服务器" class="headerlink" title="Nginx服务器"></a>Nginx服务器</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Nginx是一个高性能、可靠性强的开源Web服务器软件，也可以用作反向代理服务器、负载均衡器和 HTTP缓存。</span><br><span class="line">特点:轻量级的web服务器，占用内存少，并发能力强</span><br><span class="line"></span><br><span class="line">正向代理：例如：我们直接用国内的服务器访问国外的服务器很慢，或者无法访问，需要在本地搭建一个服务器来帮助我们去访问，这种就是正向代理，浏览器中配置代理服务器</span><br><span class="line"></span><br><span class="line">反向代理：比如我们访问淘宝时候，淘宝内部肯定不止一个服务器，那我们访问的时候，是不是要在服务器中频繁登陆？</span><br><span class="line">搭建过渡服务器，只登录一次，但是访问所有，这就是反向代理，我们只需要把请求发送给反向代理服务器，由反向代理服务器去选择目标服务器获取数据后，再返回给客户端，此时反向代理服务器和目标服务器对外就是一个服务器，暴露的是代理服务器，隐藏了正式服务器的地址。</span><br><span class="line"></span><br><span class="line">作用：隐藏真实服务器： 反向代理服务器隐藏了真实的目标服务器，客户端无法直接访问目标服务器。这提高了服务器的安全性，因为客户端无法得知实际处理请求的服务器的信息。</span><br><span class="line"></span><br><span class="line">负载均衡： 反向代理服务器可以分发客户端的请求到多个目标服务器，以实现负载均衡。这有助于分担服务器的负载，提高整体系统的性能和可用性。</span><br><span class="line"></span><br><span class="line">安全性： 反向代理可以作为一个额外的安全层，过滤恶意请求、拦截攻击，提供安全性功能如SSL终止和Web应用防火墙（WAF）。</span><br><span class="line"></span><br><span class="line">SSL终止： 反向代理可以终止（解密）客户端发来的SSL/TLS加密连接，将请求以明文形式发送到目标服务器，然后将目标服务器的响应重新加密后返回给客户端。这有助于减轻目标服务器的负担。</span><br><span class="line"></span><br><span class="line">缓存： 反向代理服务器可以缓存静态内容，提高访问速度，减轻目标服务器的负载。它可以缓存响应并将相同的响应直接返回给多个客户端，而无需重新请求目标服务器。</span><br><span class="line"></span><br><span class="line">压缩： 反向代理服务器可以对传输到客户端的响应进行压缩，减小传输数据的大小，提高页面加载速度。</span><br><span class="line"></span><br><span class="line">静态资源服务： 反向代理可以专门处理静态资源的请求，如图片、CSS和JavaScript文件，提供更高效的静态资源服务。</span><br><span class="line"></span><br><span class="line">故障转移： 如果目标服务器出现故障，反向代理可以将请求转发到备用服务器，提高系统的可用性。</span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240129212602769.png" alt="image-20240129212602769" style="zoom: 80%;">

<h1 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h1><h2 id="Maven简介"><a href="#Maven简介" class="headerlink" title="Maven简介"></a>Maven简介</h2><p>一款基于JAVA平台的项目管理和整合工具，将项目开发和管理过程，抽象成一个项目对象模型POM，只需要做一些简单的配置，</p>
<p>Maven就可以自动完成项目的编译，测试，打包，部署</p>
<p>pom.xml（配置文件）  –&gt;   <strong>POM （项目对象）–&gt;  依赖管理</strong>  –&gt;本地仓库–&gt;私服–&gt;中央仓库</p>
<p>​                                                 构建生命周期阶段</p>
<p>​                                                通过一些插件–&gt;生成jar包，源代码，帮助文档，XML等</p>
<p><strong>Maven作用：</strong></p>
<p>项目构建：提供方便的，跨平台的自动化构建方式</p>
<p>依赖管理：管理项目依赖的资源（jar包），避免资源间的版本冲突</p>
<p>统一开发结构：提供标准的，统一的项目结构</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">自己组织的话：基于java的项目构建和管理的工具，主要作用有仨：1.依赖管理：传统手动导入的话很麻烦，还会有jar包之间的冲突（比如要升级一个版本，其他相关的jar包版本都要升级）使用Maven管理的话，直接在pom.xml文件中用修改dependence中的即可，2.统一开发的结构：比如就是我们开发工具是常用的是IDAE，当然也有其他的工具，eclipse等，提供这种统一的开发结构就能让项目在不同的平台哦也能运行 3、项目构建：提供项目周期中的各种插件：包括项目的清理(clean)，编译(compiler),打包(jar)等等</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">创建Maven工程：配置Maven环境：使用本地安装的Maven，修改配置文件以及本地仓库</span><br></pre></td></tr></table></figure>

<p>Maven基本概念：仓库，坐标</p>
<p>仓库：用于存储资源，包含各种jar包</p>
<p>本地（个人开发者）—局域网—&gt;私服（企业服务器）–&gt;中央仓库（Maven团队）</p>
<p>本地仓库：</p>
<p>远程仓库： 私服，中央仓库</p>
<p>坐标：Maven中坐标用于描述仓库资源的位置</p>
<p>坐标组成：</p>
<p>groupID：项目组织</p>
<p>artifactID：项目名称</p>
<p>version：版本号</p>
<p>packageing：打包方式</p>
<p>坐标作用：找到资源的位置，通过标识将资源的识别与下载交给机器</p>
<p>举例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>...<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>...<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>...<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>...<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>...<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>依赖传递：</p>
<p>直接依赖：在当前项目中通过依赖配置建立依赖关系</p>
<p>间接依赖：通过依赖的依赖，间接依赖其他资源</p>
<p>依赖传递的冲突问题：路径优先，层级越深，优先度越低</p>
<p>可选依赖：对外隐藏 optional</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;<span class="name">optional</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>排除依赖 exclusion</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span> junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">&lt;artifactidjunit&lt;/artifactId</span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hamcrest <span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hamcrest-core&lt;/artifactId</span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>依赖范围：主程序，测试程序，参与打包</p>
<p>依赖的jar默认情况下是可以在任何地方使用的</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span> compile <span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">compile <span class="comment">&lt;!--默认全局--&gt;</span></span><br><span class="line">test</span><br><span class="line">provided<span class="comment">&lt;!--主代码和测试--&gt;</span></span><br><span class="line">runtime <span class="comment">&lt;!--打包--&gt;</span></span><br></pre></td></tr></table></figure>



<p>依赖范围的传递性：</p>
<p>项目构建生命周期：</p>
<ul>
<li><p>clean</p>
</li>
<li><p>default：主要生命周期，用于构建应用程序</p>
</li>
<li><p>site：</p>
</li>
</ul>
<p>插件：插件与生命周期的阶段绑定，执行到对应生命周期时，执行对应插件的功能</p>
<h2 id="web分析"><a href="#web分析" class="headerlink" title="web分析"></a>web分析</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230906144736342.png" alt="image-20230906144736342"></p>
<p>浏览器：</p>
<ul>
<li><p>输入网址：<code>http://192.168.100.11:8080/hello</code></p>
<ul>
<li><p>通过IP地址192.168.100.11定位到网络上的一台计算机</p>
<blockquote>
<p>我们之前在浏览器中输入的localhost，就是127.0.0.1（本机）</p>
</blockquote>
</li>
<li><p>通过端口号8080找到计算机上运行的程序</p>
<blockquote>
<p><code>localhost:8080</code>  , 意思是在本地计算机中找到正在运行的8080端口的程序</p>
</blockquote>
</li>
<li><p>&#x2F;hello是请求资源位置</p>
<ul>
<li>资源：对计算机而言资源就是数据<ul>
<li>web资源：通过网络可以访问到的资源（通常是指存放在服务器上的数据）</li>
</ul>
</li>
</ul>
<blockquote>
<p><code>localhost:8080/hello</code> ，意思是向本地计算机中的8080端口程序，获取资源位置是&#x2F;hello的数据</p>
<ul>
<li>8080端口程序，在服务器找&#x2F;hello位置的资源数据，发给浏览器</li>
</ul>
</blockquote>
</li>
</ul>
</li>
</ul>
<p>服务器：（可以理解为ServerSocket）</p>
<ul>
<li>接收到浏览器发送的信息（如：&#x2F;hello）</li>
<li>在服务器上找到&#x2F;hello的资源</li>
<li>把资源发送给浏览器</li>
</ul>
<h2 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h2><p>HTTP：Hyper Text Transfer Protocol(超文本传输协议)，规定了浏览器与服务器之间数据传输的规则。</p>
<p>http协议要求：浏览器在向服务器发送请求数据时，或是服务器在向浏览器发送响应数据时，都必须按照固定的格式进行数据传输</p>
<p>特点：</p>
<ul>
<li><blockquote>
<p>是一种面向连接的(建立连接之前是需要经过三次握手)、可靠的、基于字节流的传输层通信协议，在数据传输方面更安全</p>
</blockquote>
</li>
<li><p><strong>基于请求-响应模型:</strong>   一次请求对应一次响应（先请求后响应）</p>
<blockquote>
<p>请求和响应是一一对应关系，没有请求，就没有响应</p>
</blockquote>
</li>
<li><p><strong>HTTP协议是无状态协议:</strong>  对于数据没有记忆能力。每次请求-响应都是独立的</p>
</li>
</ul>
<p>无状态指的是客户端发送HTTP请求给服务端之后，服务端根据请求响应数据，响应完后，不会记录任何信息。</p>
<ul>
<li>缺点:  多次请求间不能共享数据</li>
<li>优点:  速度快</li>
</ul>
<h2 id="HTTP-请求协议："><a href="#HTTP-请求协议：" class="headerlink" title="HTTP-请求协议："></a>HTTP-请求协议：</h2><p>浏览器和服务器是按照HTTP协议进行数据通信的。</p>
<p>HTTP协议又分为：请求协议和响应协议</p>
<ul>
<li>请求协议：浏览器将数据以请求格式发送到服务器<ul>
<li>包括：<strong>请求行</strong>、<strong>请求头</strong> 、<strong>请求体</strong></li>
</ul>
</li>
<li>响应协议：服务器将数据以响应格式返回给浏览器<ul>
<li>包括：<strong>响应行</strong> 、<strong>响应头</strong> 、<strong>响应体</strong></li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">请求方式</th>
<th align="left">请求说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>GET</strong></td>
<td align="left">获取资源。<br>向特定的资源发出请求。例：<a target="_blank" rel="noopener" href="http://www.baidu.com/s?wd=itheima">http://www.baidu.com/s?wd=itheima</a></td>
</tr>
<tr>
<td align="center"><strong>POST</strong></td>
<td align="left">传输实体主体。<br>向指定资源提交数据进行处理请求（例：上传文件），数据被包含在请求体中。</td>
</tr>
</tbody></table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230906151225973.png" alt="image-20230906151225973"></p>
<p>GET请求和POST请求的区别：</p>
<table>
<thead>
<tr>
<th align="left">区别方式</th>
<th>GET请求</th>
<th>POST请求</th>
</tr>
</thead>
<tbody><tr>
<td align="left">请求参数</td>
<td>请求参数在请求行中。<br>例：&#x2F;brand&#x2F;findAll?name&#x3D;OPPO&amp;status&#x3D;1</td>
<td>请求参数在请求体中</td>
</tr>
<tr>
<td align="left">请求参数长度</td>
<td>请求参数长度有限制(浏览器不同限制也不同)</td>
<td>请求参数长度没有限制</td>
</tr>
<tr>
<td align="left">安全性</td>
<td>安全性低。原因：请求参数暴露在浏览器地址栏中。</td>
<td>安全性相对高</td>
</tr>
</tbody></table>
<h2 id="HTTP-响应协议"><a href="#HTTP-响应协议" class="headerlink" title="HTTP-响应协议"></a>HTTP-响应协议</h2><p>格式：与HTTP的请求一样，HTTP响应的数据也分为3部分：<strong>响应行</strong>、<strong>响应头</strong> 、<strong>响应体</strong> </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230906152641833.png" alt="image-20230906152641833"></p>
<ul>
<li><p>响应行(以上图中红色部分)：响应数据的第一行。响应行由<code>协议及版本</code>、<code>响应状态码</code>、<code>状态码描述</code>组成</p>
<ul>
<li>协议&#x2F;版本：HTTP&#x2F;1.1</li>
<li>响应状态码：200</li>
<li>状态码描述：OK</li>
</ul>
</li>
<li><p>响应头(以上图中黄色部分)：响应数据的第二行开始。格式为key：value形式</p>
</li>
</ul>
<p>响应体(以上图中绿色部分)： 响应数据的最后一部分。存储响应的数据</p>
<ul>
<li>响应体和响应头之间有一个空行隔开（作用：用于标记响应头结束）</li>
</ul>
<p>响应状态码</p>
<table>
<thead>
<tr>
<th>状态码分类</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>1xx</td>
<td><strong>响应中</strong> — 临时状态码。表示请求已经接受，告诉客户端应该继续请求或者如果已经完成则忽略</td>
</tr>
<tr>
<td>2xx</td>
<td><strong>成功</strong> — 表示请求已经被成功接收，处理已完成</td>
</tr>
<tr>
<td>3xx</td>
<td><strong>重定向</strong> — 重定向到其它地方，让客户端再发起一个请求以完成整个处理</td>
</tr>
<tr>
<td>4xx</td>
<td><strong>客户端错误</strong> — 处理发生错误，责任在客户端，如：客户端的请求一个不存在的资源，客户端未被授权，禁止访问等</td>
</tr>
<tr>
<td>5xx</td>
<td><strong>服务器端错误</strong> — 处理发生错误，责任在服务端，如：服务端抛出异常，路由出错，HTTP版本不支持等</td>
</tr>
</tbody></table>
<h2 id="HTTP-协议解析-Tomcat"><a href="#HTTP-协议解析-Tomcat" class="headerlink" title="HTTP-协议解析-Tomcat"></a>HTTP-协议解析-Tomcat</h2><h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2><p>在网络环境下，根据服务器提供的服务类型不同，可分为：文件服务器，数据库服务器，应用程序服务器，WEB服务器等。</p>
<p>服务器只是一台设备，必须安装服务器软件才能提供相应的服务。</p>
<p><strong>服务器软件</strong></p>
<p>服务器软件：基于ServerSocket编写的程序</p>
<ul>
<li>服务器软件本质是一个运行在服务器设备上的应用程序</li>
<li>能够接收客户端请求，并根据请求给客户端响应数据</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/1530625192392.png" alt="1530625192392"></p>
<h3 id="Web服务器"><a href="#Web服务器" class="headerlink" title="Web服务器"></a>Web服务器</h3><p>Web服务器是一个应用程序(软件)，对HTTP协议的操作进行封装，使得程序员不必直接对协议进行操作(不用程序员自己写代码去解析http协议规则)，让Web开发更加便捷。主要功能是”提供网上信息浏览服务”。</p>
<p>Web服务器是安装在服务器端的一款软件，将来我们把自己写的Web项目部署到Tomcat服务器软件中，当Web服务器软件启动后，部署在Web服务器软件中的页面就可以直接通过浏览器来访问了。</p>
<p><strong>Web服务器软件使用步骤</strong></p>
<ul>
<li>准备静态资源</li>
<li>下载安装Web服务器软件</li>
<li>将静态资源部署到Web服务器上</li>
<li>启动Web服务器使用浏览器访问对应的资源</li>
</ul>
<h1 id="spring"><a href="#spring" class="headerlink" title="spring"></a>spring</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring 是一款轻量级的java开发框架，一般指的是spring framework,他是很多模块的集合，包括springboot快速启动，springcloud微服务，spring Data数据库等spring全家桶</span><br><span class="line"></span><br><span class="line">springboot就是帮助我们快速的构建应用程序，简化开发，提高效率</span><br></pre></td></tr></table></figure>



<h2 id="springboot入门程序解析"><a href="#springboot入门程序解析" class="headerlink" title="springboot入门程序解析"></a>springboot入门程序解析</h2><p>起步依赖：创建好springboot工程就会导入的依赖，含有starter的</p>
<h2 id="SpringBootWeb的请求响应"><a href="#SpringBootWeb的请求响应" class="headerlink" title="SpringBootWeb的请求响应"></a>SpringBootWeb的请求响应</h2><p>快速入门程序：</p>
<p>基于springboot开发一个web应用，浏览器发起&#x2F;hello请求时候，给浏览器返回字符串helloworld，</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230907090532641.png" alt="image-20230907090532641"></p>
<p>我们在浏览器发起请求，请求了后端web服务器（内置的Tomcat），请求会被部署在Tomcat的Controller接收，然后Controller再给浏览器一个响应helloworld</p>
<p>其实呢，在Tomcat这类web服务器中，是不识别我们自己定义的Controller类的， </p>
<p>Tomcat是一个servlet容器，支持servlet规范的，所以在Tomcat中是可以识别servlet程序的</p>
<p>那我们所编写的XxxController 是如何处理请求的，又与Servlet之间有什么联系呢？</p>
<p>其实呢，在SpringBoot进行web程序开发时，它内置了一个核心的Servlet程序 DispatcherServlet，称之为 核心控制器。 DispatcherServlet 负责接收页面发送的请求，然后根据执行的规则，将请求再转发给后面的请求处理器Controller，请求处理器处理完请求之后，最终再由DispatcherServlet给浏览器响应数据</p>
<h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><p>是一种Java编程模型，用于在Web服务器上处理HTTP请求和响应。Servlet充当了Web应用程序的控制器，允许开发者以Java编写服务器端逻辑，以响应客户端的HTTP请求。</p>
<h2 id="请求：Postman"><a href="#请求：Postman" class="headerlink" title="请求：Postman"></a>请求：Postman</h2><p>Postman是一款功能强大的网页调试与发送网页HTTP请求的Chrome插件。</p>
<p>可以模拟浏览器向后端服务器发起任何形式(如:get、post)的HTTP请求</p>
<p>使用Postman还可以在发起请求时，携带一些请求参数、请求头等信息</p>
<h3 id="简单参数"><a href="#简单参数" class="headerlink" title="简单参数"></a>简单参数</h3><p>在向服务器发起请求时，向服务器传递一些普通的请求数据</p>
<p>后端程序中，两种方式接受传递过来的普通数据</p>
<p>1.原始方式：通过servlet中提供的API：</p>
<p>2.springboot方式：对原始的API进行了封装</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span> </span><br><span class="line"><span class="comment">//是spring框架中的注解，告诉spring该类是一个控制器，用于处理HPPT的请求和响应</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="comment">//用于将HTTP请求映射到控制器的方法，在这里指定了路径</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(String name,Integer age)</span>&#123;</span><br><span class="line">        System.out.println(name +<span class="string">&quot;:&quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注解的作用：用来为代码提供元数据信息的特殊标注，以便在编译，运行，框架扫描，执行特定的操作</p>
<p>在Java中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">编译时注解：作用于编译器，在代码编译时执行特定的操作，例如重写override，就会确保子类正确的覆盖父类的方法</span><br><span class="line"></span><br><span class="line">运行时注解：在运行中执行特定的操作，例如：使用反射机制，获取类的信息，或者配置应用程序</span><br></pre></td></tr></table></figure>



<p>在springboot中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.依赖注入：@Autowired自动装配bean，当一个类上使用 `@Autowired` 注解时，Spring容器会自动查找并注入满足依赖关系的Bean。减少了手动配置的需求</span><br><span class="line"></span><br><span class="line">2.请求映射：用注解来定义web请求的映射规则，@RequestMapping，@GetMapping用于定义HTTP请求的处理方法</span><br><span class="line"></span><br><span class="line">3.配置管理：例如 @Configuration 用于定义配置类，@Value 用于获取配置属性的值。</span><br><span class="line"></span><br><span class="line">4.AOP（面向切面编程）：Spring Boot支持AOP，可以使用注解如 @Aspect 和 @Around 来实现切面编程。</span><br></pre></td></tr></table></figure>

<h3 id="RequestParam注解："><a href="#RequestParam注解：" class="headerlink" title="@RequestParam注解："></a>@RequestParam注解：</h3><p>对于简单参数来讲</p>
<p>请求参数名和controller方法中的形参名不一致时，无法接收到请求数据</p>
<p>那么如果我们开发中，遇到了这种请求参数名和controller方法中的形参名不相同，怎么办？</p>
<p>解决方案：可以使用Spring提供的@RequestParam注解完成映射</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">// http://localhost:8080/simpleParam?name=Tom&amp;age=20</span></span><br><span class="line">    <span class="comment">// 请求参数名：name</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//springboot方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/simpleParam&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">simpleParam</span><span class="params">(<span class="meta">@RequestParam(&quot;name&quot;)</span> String username , Integer age )</span>&#123;</span><br><span class="line">        System.out.println(username+<span class="string">&quot;  :  &quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实体参数</p>
<p>简单实体对象：将请求参数封装为一个对象，请求参数名称和实体类的属性名称相同</p>
<p>复杂实体对象：</p>
<p>请求参数名与形参对象属性名相同，按照对象层次结构关系即可接收嵌套实体类属性参数。*</p>
<h3 id="数组和集合参数"><a href="#数组和集合参数" class="headerlink" title="数组和集合参数"></a>数组和集合参数</h3><p>数组：直接使用数组封装</p>
<p>集合：通过@RequestParam注解绑定参数关系@RequestParam List<String> list</String></p>
<h3 id="日期参数"><a href="#日期参数" class="headerlink" title="日期参数"></a>日期参数</h3><p>使用注解@DateTimeFormat(pattern &#x3D; “yyyy-MM-dd HH:mm:ss”)注解指明其具体格式完成</p>
<h3 id="JSON参数：最常见的前后端数据交互方式"><a href="#JSON参数：最常见的前后端数据交互方式" class="headerlink" title="JSON参数：最常见的前后端数据交互方式"></a>JSON参数：最常见的前后端数据交互方式</h3><p>需要使用@Requestbody标识</p>
<h3 id="路径参数"><a href="#路径参数" class="headerlink" title="路径参数"></a>路径参数</h3><p>直接在请求的url中传递参数，例如<a target="_blank" rel="noopener" href="http://localhost:8080/user/1name">http://localhost:8080/user/1name</a> </p>
<p>@pathParam</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//路径参数</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/path/&#123;id&#125;/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pathParam2</span><span class="params">(<span class="meta">@PathVariable</span> Integer id, <span class="meta">@PathVariable</span> String name)</span>&#123;</span><br><span class="line">        System.out.println(id+ <span class="string">&quot; : &quot;</span> +name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@PathVariable注解</p>
<p>作用：从url中提取并且映射到方法参数中的<strong>占位符</strong>（路径变量）的值</p>
<p>过程：当一个请求到达spring控制器controller时，spring会解析请求的url，并将其中的路径变量与使用注解的参数方法匹配，匹配成功后，将路径变量的值映射到方法参数中，供方法使用</p>
<p>@Requestbody注解</p>
<p>作用：用于将HTTP请求的具体内容（通常为JSON或者xml的数据）映射到JAVA对象上</p>
<p>过程：当一个HTTP POST请求到达Spring控制器方法时，Spring会从请求体中提取数据，然后使用 <code>@RequestBody</code> 注解的方法参数的类型来进行反序列化，将请求体中的数据映射为Java对象。</p>
<p>@RequestParam注解</p>
<p>作用：用于从HTTP请求中获取参数的值，并且将其绑定到方法参数上，供方法使用</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230908140427712.png" alt="image-20230908140427712"></p>
<h3 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h3><p>请求响应模式：有请求就有响应</p>
<p>Controller程序除了接受请求外，还能进行响应，通过@ResponseBody响应，而@ResponseBody又是集成在@ResController中</p>
<p>@RestController &#x3D; @Controller + @ResponseBody </p>
<p>@ResponseBody注解</p>
<ul>
<li>类型：方法注解、类注解</li>
<li>位置：书写在Controller方法上或类上</li>
<li>作用：将方法返回值直接响应给浏览器<ul>
<li>如果返回值类型是实体对象&#x2F;集合，将会转换为JSON格式后在响应给浏览器</li>
</ul>
</li>
</ul>
<h3 id="分层解耦合"><a href="#分层解耦合" class="headerlink" title="分层解耦合"></a>分层解耦合</h3><p>三层架构：开发程序时候尽可能让每一个接口、类、方法的职责更单一些（单一职责原则）。</p>
<blockquote>
<p>单一职责原则：一个类或一个方法，就只做一件事情，只管一块功能。</p>
<p>这样就可以让类、接口、方法的复杂度更低，可读性更强，扩展性更好，也更利用后期的维护。</p>
</blockquote>
<p>基于三层架构的执行流程：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20221204194207812.png" alt="image-20221204194207812"></p>
<p>前端发起请求，由Controller层接受（Controller 响应数据给前端）</p>
<p>Controller层，调用Service层来进行逻辑处理，把处理结果返回给Controller层</p>
<p>Service层：在逻辑处理的过程中调用Dao层（逻辑处理的过程中需要数据从Dao层中获取）</p>
<p>Dao层操作文件中的数据（Dao层中拿到的数据会返回给Service层）</p>
<p>由于数据访问的对象，可能是文件，数据库，别人接口获取到的数据，</p>
<p>所以要先定义一个Dao的接口，再用不同的类去实现这个接口，重写接口中的方法</p>
<p>（这里本质上就是接口多态的实现，传入一个接口类型的实现类对象，根据不同实现类对象调用不同实现类里重写的方法）</p>
<h3 id="分层解耦"><a href="#分层解耦" class="headerlink" title="分层解耦"></a>分层解耦</h3><p>内聚：软件中各个模块内部的功能联系</p>
<p>耦合：衡量软件中各层、模块之间的依赖，关联程度</p>
<h5 id="软件设计原则：高内聚低耦合"><a href="#软件设计原则：高内聚低耦合" class="headerlink" title="软件设计原则：高内聚低耦合"></a>软件设计原则：高内聚低耦合</h5><p>高内聚指的是：一个模块中各个元素之间的联系的紧密程度，如果各个元素(语句、程序段)之间的联系程度越高，则内聚性越高，即 “高内聚”。</p>
<p>低耦合指的是：软件中各个层、模块之间的依赖关联程序越低越好。</p>
<p>需要用到spring的核心概念</p>
<h5 id="控制反转：IOC，"><a href="#控制反转：IOC，" class="headerlink" title="控制反转：IOC，"></a>控制反转：IOC，</h5><p>对象的创建控制权由程序自身，转移到外部容器</p>
<p>@Component &#x2F;&#x2F;将当前对象交给IOC容器管理，成为IOC容器的bean</p>
<h5 id="依赖注入：DI，"><a href="#依赖注入：DI，" class="headerlink" title="依赖注入：DI，"></a>依赖注入：DI，</h5><p>容器为应用程序提供运行时，所依赖的资源，称依赖注入</p>
<p>@Autowired&#x2F;&#x2F;运行时从IOC容器中获取该类型的对象，并且赋值给变量</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">//将当前对象交给IOC容器管理,成为IOC容器的bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpServiceA</span> <span class="keyword">implements</span> <span class="title class_">EmpService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//运行时,从IOC容器中获取该类型对象,赋值给该变量</span></span><br><span class="line">    <span class="keyword">private</span> EmpDao empDao ;</span><br></pre></td></tr></table></figure>

<h5 id="IOC-详解"><a href="#IOC-详解" class="headerlink" title="IOC 详解"></a>IOC 详解</h5><p>bean对象的声明：Spring框架为了更好的标识web应用程序开发当中，bean对象到底归属于哪一层，又提供了@Component的衍生注解：</p>
<ul>
<li>@Controller    （标注在控制层类上）</li>
<li>@Service          （标注在业务层类上）</li>
<li>@Repository    （标注在数据访问层类上）</li>
</ul>
<table>
<thead>
<tr>
<th align="left">注解</th>
<th>说明</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td align="left">@Controller</td>
<td>@Component的衍生注解</td>
<td>标注在控制器类上</td>
</tr>
<tr>
<td align="left">@Service</td>
<td>@Component的衍生注解</td>
<td>标注在业务类上</td>
</tr>
<tr>
<td align="left">@Repository</td>
<td>@Component的衍生注解</td>
<td>标注在数据访问类上（由于与mybatis整合，用的少）</td>
</tr>
<tr>
<td align="left">@Component</td>
<td>声明bean的基础注解</td>
<td>不属于以上三类时，用此注解</td>
</tr>
</tbody></table>
<h5 id="组件扫描"><a href="#组件扫描" class="headerlink" title="组件扫描"></a>组件扫描</h5><p>bean对象要生效，还需要被组件扫描</p>
<p>需要被组件@ComponentScan扫描，被集成在@SpringbootApplication中，默认扫描范围是SpringBoot启动类所在的包及其子包</p>
<h5 id="依赖注入详解DI："><a href="#依赖注入详解DI：" class="headerlink" title="依赖注入详解DI："></a>依赖注入详解DI：</h5><p>使用了@Autowired这个注解，完成了依赖注入的操作，而这个Autowired翻译过来叫：自动装配。</p>
<p>@Autowired注解，默认是按照<strong>类型</strong>进行自动装配的（去IOC容器中找某个类型的对象，然后完成注入操作）</p>
<p>举例：在Controller运行的时候，就要到IOC容器当中去查找service类型的对象，而我们的IOC容器中刚好有service对象，所以，就找到这个类型的对象完成注入操作</p>
<p>IOC容器里，存在多个相同类型的bean对象，会报错，需要添加注解指明当前生效的bean类</p>
<ul>
<li><p>@Primary：当存在多个相同类型的Bean注入时，加上@Primary注解，来确定默认的实现。</p>
</li>
<li><p>@Qualifier：指定当前要注入的bean对象。 在@Qualifier的value属性中，指定注入的bean的名称。</p>
</li>
<li><p>@Resource：是按照bean的名称进行注入。通过name属性指定要注入的bean的名称。</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230911160941781.png" alt="image-20230911160941781"></p>
<h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><p>概述：持久化，把数据保存到可掉电式存储设备中供以后使用</p>
<p>数据库： database  DB：文件系统，保存了一系列数据</p>
<p>DBMS：数据库管理系统：操作和管理数据库的大型软件</p>
<p>关系型数据库：行列形式存储</p>
<p>非关系型：数据以对象的形式存储在数据库中</p>
<p>键值型数据库：key-value形式</p>
<p>搜索引擎数据库：倒排索引</p>
<p>针对于数据库来说，主要包括三个阶段：</p>
<ol>
<li>数据库设计阶段<ul>
<li>参照页面原型以及需求文档设计数据库表结构</li>
</ul>
</li>
<li>数据库操作阶段<ul>
<li>根据业务功能的实现，编写SQL语句对数据表中的数据进行增删改查操作</li>
</ul>
</li>
<li>数据库优化阶段<ul>
<li>通过数据库的优化来提高数据库的访问性能。优化手段：索引、SQL优化、分库分表等</li>
</ul>
</li>
</ol>
<h2 id="SQL："><a href="#SQL：" class="headerlink" title="SQL："></a>SQL：</h2><p>结构化查询语言 structured Query Language</p>
<ol>
<li>SQL的分类</li>
</ol>
<p>DDL：数据定义语言 ，CREATE \ ALTER \ DROP \ RENAME \ TRUNCATE</p>
<p>DML：数据操作语言 INSERT \ DELETE \ UPDATE \ SELECT \ </p>
<p>DCL：数据控制语言 COMMIT \ ROLLBACK \ SAVEPOINT \ GRANT \ REVOKE</p>
<p><strong>链接：localhost 端口：3306 用户名：user  密码：123456</strong></p>
<h4 id="表操作："><a href="#表操作：" class="headerlink" title="表操作："></a>表操作：</h4><p>案例：创建一个表 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table  表名(</span><br><span class="line">	字段1  字段1类型 [约束]  [comment  字段1注释 ],</span><br><span class="line">	字段2  字段2类型 [约束]  [comment  字段2注释 ],</span><br><span class="line">	......</span><br><span class="line">	字段n  字段n类型 [约束]  [comment  字段n注释 ] </span><br><span class="line">) [ comment  表注释 ] ;</span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_user (</span><br><span class="line">    id <span class="type">int</span> comment <span class="string">&#x27;ID,唯一标识&#x27;</span>,   # id是一行数据的唯一标识（不能重复）</span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">20</span>) comment <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>) comment <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">    age <span class="type">int</span> comment <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">    gender <span class="type">char</span>(<span class="number">1</span>) comment <span class="string">&#x27;性别&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;用户表&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20220829143005524.png" alt="image-20220829143005524"></p>
<h4 id="约束："><a href="#约束：" class="headerlink" title="约束："></a>约束：</h4><table>
<thead>
<tr>
<th><strong>约束</strong></th>
<th><strong>描述</strong></th>
<th><strong>关键字</strong></th>
</tr>
</thead>
<tbody><tr>
<td>非空约束</td>
<td>限制该字段值不能为null</td>
<td>not null</td>
</tr>
<tr>
<td>唯一约束</td>
<td>保证字段的所有数据都是唯一、不重复的</td>
<td>unique</td>
</tr>
<tr>
<td>主键约束</td>
<td>主键是一行数据的唯一标识，要求非空且唯一</td>
<td>primary key</td>
</tr>
<tr>
<td>默认约束</td>
<td>保存数据时，如果未指定该字段值，则采用默认值</td>
<td>default</td>
</tr>
<tr>
<td>外键约束</td>
<td>让两张表的数据建立连接，保证数据的一致性和完整性</td>
<td>foreign key</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_user (</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment comment <span class="string">&#x27;ID,唯一标识&#x27;</span>, #主键自动增长</span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span> comment <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">    age <span class="type">int</span> comment <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">    gender <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">default</span> <span class="string">&#x27;男&#x27;</span> comment <span class="string">&#x27;性别&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;用户表&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>数据类型：数值类型，字符串类型，日期和时间类型</p>
<p>数值类型</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230912140829164.png" alt="image-20230912140829164"></p>
<p>字符串类型</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230912142339315.png" alt="image-20230912142339315"></p>
<p>日期时间类型</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230912144451625.png" alt="image-20230912144451625"></p>
<h5 id="设计表流程"><a href="#设计表流程" class="headerlink" title="设计表流程"></a>设计表流程</h5><p>通过上面的案例，我们明白了，设计一张表，基本的流程如下：</p>
<ol>
<li><p>阅读页面原型及需求文档</p>
</li>
<li><p>基于页面原则和需求文档，确定原型字段(类型、长度限制、约束)</p>
</li>
<li><p>再增加表设计所需要的业务基础字段(id主键、插入时间、修改时间)</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20221205232253088.png" alt="image-20221205232253088"></p>
<blockquote>
<p>说明：</p>
<ul>
<li><p>create_time：记录的是当前这条数据插入的时间。 </p>
</li>
<li><p>update_time：记录当前这条数据最后更新的时间。</p>
</li>
</ul>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230913095855893.png" alt="image-20230913095855893"></p>
<p>或者直接用图形化界面操作完成</p>
<h4 id="数据库操作：DML"><a href="#数据库操作：DML" class="headerlink" title="数据库操作：DML"></a>数据库操作：DML</h4><p>增加：insert </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名 (字段名<span class="number">1</span>, 字段名<span class="number">2</span>) <span class="keyword">values</span> (值<span class="number">1</span>, 值<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>案例1：向tb_emp表的username、name、gender字段插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 因为设计表时create_time, update_time两个字段不能为NULL，所以也做为要插入的字段</span><br><span class="line">insert into tb_emp(username, name, gender, create_time, update_time)</span><br><span class="line">values (&#x27;wuji&#x27;, &#x27;张无忌&#x27;, 1, now(), now());</span><br></pre></td></tr></table></figure>

<p>案例2：向tb_emp表的所有字段插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into tb_emp(id, username, password, name, gender, image, job, entrydate, create_time, update_time)</span><br><span class="line">values (null, &#x27;zhirou&#x27;, &#x27;123&#x27;, &#x27;周芷若&#x27;, 2, &#x27;1.jpg&#x27;, 1, &#x27;2010-01-01&#x27;, now(), now());</span><br></pre></td></tr></table></figure>

<p>案例3：批量向tb_emp表的username、name、gender字段插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into tb_emp(username, name, gender, create_time, update_time)</span><br><span class="line">values (&#x27;weifuwang&#x27;, &#x27;韦一笑&#x27;, 1, now(), now()),</span><br><span class="line">       (&#x27;fengzi&#x27;, &#x27;张三疯&#x27;, 1, now(), now());</span><br></pre></td></tr></table></figure>

<blockquote>
</blockquote>
<p>修改：update</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名<span class="number">1</span> <span class="operator">=</span> 值<span class="number">1</span> , 字段名<span class="number">2</span> <span class="operator">=</span> 值<span class="number">2</span> , .... [<span class="keyword">where</span> 条件] ;</span><br></pre></td></tr></table></figure>

<p>删除：delete</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名  [<span class="keyword">where</span>  条件] ;</span><br></pre></td></tr></table></figure>

<h4 id="数据库操作：DQL"><a href="#数据库操作：DQL" class="headerlink" title="数据库操作：DQL"></a>数据库操作：DQL</h4><h4 id="select"><a href="#select" class="headerlink" title="select"></a>select</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select...from(<span class="keyword">join</span> <span class="keyword">on</span>)...where...group by...having...order by...limit...</span><br></pre></td></tr></table></figure>

<p>sql语句的底层执行过程</p>
<p>在SQL语句中，执行顺序通常遵循以下规则：</p>
<p>FROM子句：首先执行FROM子句，以确定要查询的表和列。</p>
<p> FROM…(LEFT&#x2F;RIGHT)JOIN…ON 多表的链接条件</p>
<p>WHERE子句：如果存在WHERE子句，则会先执行WHERE子句，以过滤出符合条件的行。</p>
<p>GROUP BY子句：如果存在GROUP BY子句，则会先执行GROUP BY子句，以将结果按照指定的列进行分组。</p>
<p>HAVING子句：如果存在HAVING子句，则会先执行HAVING子句，以过滤出满足聚合函数条件的组。</p>
<p>ORDER BY 。。。</p>
<p>LIMIT。。。</p>
<p>SELECT子句：最后执行SELECT子句，以选择需要返回的列。</p>
<p>具体见数据库学习笔记</p>
<p>where having</p>
<p><strong>where与having区别（面试题）</strong></p>
<ul>
<li>执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤。</li>
<li>判断条件不同：where不能对聚合函数进行判断，而having可以。</li>
</ul>
<h4 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表时指定</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line">	字段名    数据类型,</span><br><span class="line">	...</span><br><span class="line">	[<span class="keyword">constraint</span>]   [外键名称]  <span class="keyword">foreign</span>  key (外键字段名)   <span class="keyword">references</span>   主表 (主表列名)	</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 建完表后，添加外键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>  表名  <span class="keyword">add</span> <span class="keyword">constraint</span>  外键名称  <span class="keyword">foreign</span> key(外键字段名) <span class="keyword">references</span> 主表(主表列名);</span><br></pre></td></tr></table></figure>

<p>多表设计</p>
<p>一对多</p>
<p>一对一</p>
<h5 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h5><p>多对多的关系在开发中属于也比较常见的。比如：学生和老师的关系，一个学生可以有多个授课老师，一个授课老师也可以有多个学生。在比如：学生和课程的关系，一个学生可以选修多门课程，一个课程也可以供多个学生选修。</p>
<ul>
<li><p>关系：一个学生可以选修多门课程，一门课程也可以供多个学生选择</p>
</li>
<li><p>实现关系：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20221207113341028.png" alt="image-20221207113341028"></p>
<h4 id="多表查询："><a href="#多表查询：" class="headerlink" title="多表查询："></a>多表查询：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 表<span class="number">1</span>字段，表<span class="number">2</span>字段 <span class="keyword">from</span> 表<span class="number">1</span>，表<span class="number">2</span> <span class="keyword">where</span> 表<span class="number">1.</span>字段<span class="operator">=</span>表<span class="number">2.</span>字段</span><br><span class="line"><span class="keyword">select</span> 表<span class="number">1</span>字段，表<span class="number">2</span>字段 form 表<span class="number">1</span> <span class="keyword">join</span> 表<span class="number">2</span> <span class="keyword">on</span> 链接条件 </span><br></pre></td></tr></table></figure>

<p>多表查询的分类：</p>
<p>1.等值连接  非等值连接</p>
<p>2.自连接  非自连接</p>
<p>3.内连接 外连接</p>
<p>1.等值连接  非等值连接的例子</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.last_name,e.salary,j.grade_level</span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> employees e,job_grades j</span><br><span class="line"></span><br><span class="line"><span class="keyword">WHERE</span> e.salary <span class="keyword">BETWEEN</span> j.lowest_sal <span class="keyword">AND</span> j.highest_sal</span><br></pre></td></tr></table></figure>

<p>2.自连接的例子：在同一张表里</p>
<p>查询员工ID，员工姓名，及其管理者的ID和姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e1.employee_id,e1.last_name,e2.employee_id,e2.last_name</span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> employees e1,employees e2</span><br><span class="line"></span><br><span class="line"><span class="keyword">WHERE</span> e1.manager_id <span class="operator">=</span> e2.employee_id</span><br></pre></td></tr></table></figure>

<p>3.内连接，外连接</p>
<p>内连接：结果集中，不包括一个表与另一个表不匹配的行</p>
<p>外连接：结果集中，出了匹配的行，还查询左表或者右表中不匹配的行</p>
<p>外连接的分类：左外连接，右外连接，全满外连接</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230915100030081.png" alt="image-20230915100030081" style="zoom:150%;">

<h4 id="单行函数，聚合函数"><a href="#单行函数，聚合函数" class="headerlink" title="单行函数，聚合函数"></a>单行函数，聚合函数</h4><h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p>单行子查询：查找出的只有一行数据，使用常规的比较符，&#x3D;，&lt;,&gt;,</p>
<p>多行子查询，查找出多行数据</p>
<p>多行比较的操作符：</p>
<p>​	IN：等于列表中任意一个</p>
<p>​	ANY：某一个值比较</p>
<p>​	ALL:所有值比较</p>
<p>​	Some：any的别名</p>
<h3 id="事物"><a href="#事物" class="headerlink" title="事物"></a>事物</h3><p>事物：是一组操作的集合，它是一个不可分割的工作单位，事物会把所有的操作试做一个整体，一起向系统提交或者撤销操作请求操作，要么同事成功，要么同时失败。</p>
<p>一个业务要发送多条SQL语句给数据库执行。需要将多次访问数据库的操作视为一个整体来执行，要么所有的SQL语句全部执行成功。如果其中有一条SQL语句失败，就进行事务的回滚，所有的SQL语句全部执行失败。</p>
<p>使用事务控制删除部门和删除该部门下的员工的操作：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除学工部</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tb_dept <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除学工部的员工</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tb_emp <span class="keyword">where</span> dept_id <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>上述的这组SQL语句，如果如果执行成功，则提交事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 提交事务 (成功时执行)</span></span><br><span class="line"><span class="keyword">commit</span> ;</span><br></pre></td></tr></table></figure>

<ul>
<li>上述的这组SQL语句，如果如果执行失败，则回滚事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 回滚事务 (出错时执行)</span></span><br><span class="line"><span class="keyword">rollback</span> ;</span><br></pre></td></tr></table></figure>

<h4 id="事物的四大特性"><a href="#事物的四大特性" class="headerlink" title="事物的四大特性"></a>事物的四大特性</h4><p>原子性：事物是不可分割的最小单元，要么全部成功，要么全部失败</p>
<p>一致性：事物完成时，必须使得所有的数据状态都保持一致</p>
<p>隔离性：数据库系统提供隔离机制，保证事物在不受外部并发操作影响的独立环境下运行</p>
<p>持久性：事物一旦回滚，它对数据库中的数据的改变是永久的</p>
<h4 id="索引：index："><a href="#索引：index：" class="headerlink" title="索引：index："></a>索引：index：</h4><p>帮助数据库高效获取数据的数据结构</p>
<p>无索引：全表扫描</p>
<p>有索引： 树形结构，大大减少查询时间</p>
<p>优点：大大提高查询效率</p>
<p>缺点：索引占用存储空间，同时降低，插入，删除，更新效率，要维护索引</p>
<p>MySQL数据库支持的索引结构有很多，如：Hash索引、B+Tree索引、Full-Text索引等。</p>
<p>我们平常所说的索引，如果没有特别指明，都是指默认的 B+Tree 结构组织的索引。</p>
<p>二叉树：左边子节点比父节点小，右边子节点比父节点大</p>
<p>红黑树：是一种平衡二叉树</p>
<p>B+Tree：多路平衡搜索树</p>
<p><strong>创建索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create  [ unique ]  index 索引名 on  表名 (字段名,... ) ;</span><br></pre></td></tr></table></figure>

<p><strong>查看索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show  index  from  表名;</span><br></pre></td></tr></table></figure>

<p><strong>删除索引</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop  index  索引名  on  表名;</span><br></pre></td></tr></table></figure>

<p>注意事项：</p>
<ul>
<li>主键字段，在建表时，会自动创建主键索引</li>
<li>添加唯一约束时，数据库实际上会添加唯一索引</li>
</ul>
<h3 id="自己做SQL时候的一些训练"><a href="#自己做SQL时候的一些训练" class="headerlink" title="自己做SQL时候的一些训练"></a>自己做SQL时候的一些训练</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id ,last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">where</span> salary <span class="keyword">BETWEEN</span> <span class="number">6000</span> <span class="keyword">AND</span> <span class="number">8000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span> <span class="keyword">and</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%e%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;_a%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">not</span> <span class="keyword">BETWEEN</span> <span class="number">5000</span> <span class="keyword">and</span> <span class="number">12000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_id <span class="keyword">FROM</span> employees</span><br><span class="line">#<span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">20</span> <span class="keyword">OR</span> department_id <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">20</span>,<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,job_id <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary,commission_pct <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">like</span> <span class="string">&#x27;__a%&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">like</span> <span class="string">&#x27;%a%&#x27;</span> <span class="keyword">AND</span> last_name <span class="keyword">like</span> <span class="string">&#x27;%k%&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> first_name <span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> first_name <span class="keyword">like</span> <span class="string">&#x27;%e&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,job_id <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">BETWEEN</span> <span class="number">80</span> <span class="keyword">AND</span> <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary,manager_id </span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">in</span> (<span class="number">100</span>,<span class="number">101</span>,<span class="number">110</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> last_name,salary <span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> last_name,salary <span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span>(<span class="number">50</span>,<span class="number">60</span>,<span class="number">70</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,salary,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> department_id <span class="keyword">DESC</span>,salary <span class="keyword">ASC</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_id,</span><br><span class="line">salary<span class="operator">*</span><span class="number">12</span> newsalary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> newsalary <span class="keyword">DESC</span>,last_name <span class="keyword">ASC</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">8008</span> <span class="keyword">AND</span> <span class="number">17000</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">20</span>,<span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,job_id,email,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> email <span class="keyword">like</span> <span class="string">&#x27;%e%&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> LENGTH(email) <span class="keyword">DESC</span>,department_id <span class="keyword">ASC</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DESC</span> employees</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> employee_id,department_name</span><br><span class="line"><span class="keyword">from</span> employees,departments</span><br><span class="line"><span class="keyword">WHERE</span> employees.department_id <span class="operator">=</span> departments.department_id</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> t1.employee_id,t2.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees t1,departments t2</span><br><span class="line"><span class="keyword">WHERE</span> t1.department_id <span class="operator">=</span> t2.department_id</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id,e.last_name,d.department_name,l.city</span><br><span class="line"><span class="keyword">FROM</span> employees e,departments d,locations l</span><br><span class="line"><span class="keyword">WHERE</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">AND</span> d.location_id <span class="operator">=</span> l.location_id</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span><span class="keyword">FROM</span> job_grades</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> e.last_name,e.salary,j.grade_level</span><br><span class="line"><span class="keyword">FROM</span> employees e,job_grades j</span><br><span class="line"><span class="keyword">WHERE</span> e.salary <span class="keyword">BETWEEN</span> j.lowest_sal <span class="keyword">AND</span> j.highest_sal</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> e1.employee_id,e1.last_name,e2.employee_id,e2.last_name</span><br><span class="line"><span class="keyword">FROM</span> employees e1,employees e2</span><br><span class="line"><span class="keyword">WHERE</span> e1.manager_id <span class="operator">=</span> e2.employee_id</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> employees</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_id,</span><br><span class="line">salary<span class="operator">*</span><span class="number">12</span> newsalary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> newsalary <span class="keyword">DESC</span>,last_name <span class="keyword">ASC</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> e1.employee_id,e1.last_name,e2.employee_id,e2.last_name</span><br><span class="line"><span class="keyword">FROM</span> employees e1,employees e2</span><br><span class="line"><span class="keyword">WHERE</span> e1.manager_id <span class="operator">=</span> e2.employee_id</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> CONCAT(e1.last_name,<span class="string">&#x27;  worked for &#x27;</span>,e2.last_name) &quot;details&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees e1 <span class="keyword">JOIN</span> employees e2</span><br><span class="line"><span class="keyword">ON</span> e1.manager_id <span class="operator">=</span> e2.employee_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> CURDATE(),NOW()</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name ,salary,<span class="keyword">CASE</span> <span class="keyword">WHEN</span> salary <span class="operator">&gt;=</span> <span class="number">15000</span> <span class="keyword">THEN</span> <span class="string">&#x27;富人&#x27;</span></span><br><span class="line">															<span class="keyword">WHEN</span> salary <span class="operator">&gt;=</span> <span class="number">10000</span> <span class="keyword">THEN</span> <span class="string">&#x27;中产&#x27;</span></span><br><span class="line">															<span class="keyword">WHEN</span> salary <span class="operator">&gt;=</span> <span class="number">5000</span> <span class="keyword">THEN</span> <span class="string">&#x27;屌丝&#x27;</span></span><br><span class="line">															<span class="keyword">ELSE</span> <span class="string">&#x27;穷人&#x27;</span> <span class="keyword">END</span> &quot;标签&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> PASSWORD(<span class="string">&#x27;mysql&#x27;</span>)</span><br><span class="line"><span class="keyword">SELECT</span> MD5(<span class="string">&#x27;mysql&#x27;</span>),SHA(<span class="string">&#x27;mysql&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> VERSION(),CONNECTION_ID()</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,LENGTH(last_name)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> last_name <span class="keyword">ASC</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,ROUND(DATEDIFF(CURDATE(),hire_date)<span class="operator">/</span><span class="number">365</span>,<span class="number">1</span>) &quot;work_years&quot; ,DATEDIFF(CURDATE(),hire_date) </span><br><span class="line">&quot;work_days&quot; <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> work_days <span class="keyword">DESC</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,hire_date,department_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> department_id <span class="keyword">IN</span> (<span class="number">80</span>,<span class="number">90</span>,<span class="number">110</span>)</span><br><span class="line"><span class="keyword">AND</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">AND</span> hire_date <span class="operator">&gt;=</span> <span class="string">&#x27;1997-01-01&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary),<span class="built_in">SUM</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary),<span class="built_in">MAX</span>(salary),<span class="built_in">SUM</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id,job_id,<span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id,job_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id, <span class="built_in">MAX</span>(salary) <span class="keyword">AS</span> max_salary </span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="number">10000</span> </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id, <span class="built_in">MAX</span>(salary) <span class="keyword">AS</span> max_salary </span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="number">10000</span> <span class="keyword">AND</span> department_id <span class="keyword">IN</span> (<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>) </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"></span><br><span class="line">#选择具有各个job_id的员工人数</span><br><span class="line"><span class="keyword">SELECT</span> job_id,<span class="built_in">COUNT</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id</span><br><span class="line"></span><br><span class="line">#查询员工最高工资与最低工资的差距</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary)<span class="operator">-</span><span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"></span><br><span class="line">#查询管理者手下员工的最低工资，其中最低不超过<span class="number">6000</span>，没有管理者的不再内</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> manager_id,<span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">where</span> manager_id <span class="keyword">is</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">AND</span> salary <span class="operator">&gt;=</span> <span class="number">6000</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> manager_id</span><br><span class="line">#<span class="keyword">HAVING</span> <span class="built_in">MIN</span>(salary) <span class="operator">&gt;=</span><span class="number">6000</span></span><br><span class="line"></span><br><span class="line">#查询所有部门的名字，位置，员工数量和平均工资，按平均工资排序</span><br><span class="line"><span class="keyword">SELECT</span> d.department_name,d.location_id,<span class="built_in">count</span>(employee_id),<span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> departments d <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees e</span><br><span class="line"><span class="keyword">ON</span> d.department_id <span class="operator">=</span> e.department_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_name,location_id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> e2.last_name,e2.salary</span><br><span class="line"><span class="keyword">from</span> employees e1,employees e2</span><br><span class="line"><span class="keyword">WHERE</span> e2.salary <span class="operator">&gt;</span> e1.salary</span><br><span class="line"><span class="keyword">AND</span> e1.last_name <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> employees</span><br><span class="line">								<span class="keyword">where</span> employee_id <span class="operator">=</span> <span class="number">149</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MIN</span>(salary) <span class="operator">&gt;</span> (</span><br><span class="line">	                   <span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line">										 <span class="keyword">FROM</span> employees</span><br><span class="line">										 <span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">100</span></span><br><span class="line">	)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary) <span class="keyword">ASC</span></span><br><span class="line">LIMIT <span class="number">0</span>,<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> department_id </span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id </span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">AVG</span>(salary) <span class="operator">&lt;=</span> <span class="keyword">ALL</span>(<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line">											<span class="keyword">FROM</span> employees</span><br><span class="line">											<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">where</span> salary <span class="operator">&gt;</span> (</span><br><span class="line">								<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line">								<span class="keyword">FROM</span> employees</span><br><span class="line">								<span class="keyword">WHERE</span> department_id <span class="operator">=</span> e.department_id</span><br><span class="line">)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> department_id <span class="keyword">Asc</span> ,salary <span class="keyword">ASC</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><p>mybatis是一款优秀的dao持久层框架，使用Java程序操作数据库</p>
<p>使用mybatis操作数据库，就是在mybatis中编写查询代码，发送给数据库执行，数据库执行后，会把数据执行的查询结果，使用实体类封装起来（一行记录对应一个实体类对象）</p>
<p>使用实体类定义对象的属性的时候，要用包装类，因为数据库中的数据存在为空的情况，字段会返回值null，int类型的默认数值为0，包装类Integer 的默认类型为null</p>
<h3 id="mybatis快速入门"><a href="#mybatis快速入门" class="headerlink" title="mybatis快速入门"></a>mybatis快速入门</h3><p>1.创建springboot工程，数据表user，实体类User</p>
<p>2.引入mybatis的相关依赖，mybatis Framework框架，MySQL Driver配置信息</p>
<p>在resource中的application中里配置数据库的驱动，url，用户名，密码等</p>
<p>3.定义接口，@Mapper ,注解用于运行时自动生成实现类对象，交给spring的IOC容器管理</p>
<p>​                       @select，编写SQL语句</p>
<p>4，单元测试：通过依赖注入@Autowired，注入mapper接口，再调用mapper接口的list方法，输出所查询到的数据</p>
<h4 id="JDBC：Java-DataBase-Connectivity"><a href="#JDBC：Java-DataBase-Connectivity" class="headerlink" title="JDBC：Java DataBase Connectivity"></a>JDBC：Java DataBase Connectivity</h4><p>使用Java操作数据库的一套api，一套操作所有关系型数据库的规范，即接口。各个数据库厂商去实现这套接口</p>
<p>Mybatis框架，就是对原始的JDBC程序的封装。 </p>
<p> 原始jdbc程序的步骤：</p>
<p>1.注册驱动</p>
<p>2.获取链接对象</p>
<p>3.执行SQL语句，返回执行结果</p>
<p>4.处理执行结果</p>
<p>5.释放资源</p>
<p>缺点：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20221210153407998.png" alt="image-20221210153407998"></p>
<p>mybatis中对这些问题的解决</p>
<p>1.数据库链接的四要素，(驱动，链接，用户名，密码)，都配置在springboot的默认配置文件中，</p>
<p>2.查俊结果以及解析的封装，都由mybatis自动完成映射封装，我们无需关注</p>
<p>3.在mybatis中使用了数据库的连接池技术，从而避免了频繁的创建链接，销毁链接而带来的资源浪费</p>
<h4 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h4><p>没有使用数据库连接池：</p>
<p>​	客户端执行SQL语句，要先创建一个链接对象，在执行SQL，执行完后要释放，每次都要，频繁的重复销毁会比较耗费计算机的性能</p>
<p>数据库连接池是个容器，负责分配管理数据库的链接Connection</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20221210161016314.png" alt="image-20221210161016314"></p>
<ul>
<li>程序在启动时，会在数据库连接池(容器)中，创建一定数量的Connection对象</li>
</ul>
<p>允许应用程序重复使用一个现有的数据库连接，而不是再重新建立一个</p>
<ul>
<li>客户端在执行SQL时，先从连接池中获取一个Connection对象，然后在执行SQL语句，SQL语句执行完之后，释放Connection时就会把Connection对象归还给连接池（Connection对象可以复用）</li>
</ul>
<p>释放空闲时间超过最大空闲时间的连接，来避免因为没有释放连接而引起的数据库连接遗漏</p>
<ul>
<li>客户端获取到Connection对象了，但是Connection对象并没有去访问数据库(处于空闲)，数据库连接池发现Connection对象的空闲时间 &gt; 连接池中预设的最大空闲时间，此时数据库连接池就会自动释放掉这个连接对象</li>
</ul>
<p><strong>连接池的好处：</strong></p>
<p>资源重用</p>
<p>提升系统的响应速度</p>
<p>避免数据库的链接泄露</p>
<h4 id="产品：常用的数据库连接池"><a href="#产品：常用的数据库连接池" class="headerlink" title="产品：常用的数据库连接池"></a>产品：常用的数据库连接池</h4><p>Hikari：追光者，springboot默认的连接池</p>
<p>Druid：德鲁伊，阿里开源的数据库连接池</p>
<p>修改连接池的方法：直接引入依赖即可</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Druid连接池依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="lombok"><a href="#lombok" class="headerlink" title="lombok"></a>lombok</h3><p>是一个实用的JAVA类库，通过注解的方式自动生成，构造器，getter,setter,hashcode,toString等方法，并且可以自动化生成日志变量，简化JAVA开发，提高效率</p>
<table>
<thead>
<tr>
<th align="left"><strong>注解</strong></th>
<th><strong>作用</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">@Getter&#x2F;@Setter</td>
<td>为所有的属性提供get&#x2F;set方法</td>
</tr>
<tr>
<td align="left">@ToString</td>
<td>会给类自动生成易阅读的  toString 方法</td>
</tr>
<tr>
<td align="left">@EqualsAndHashCode</td>
<td>根据类所拥有的非静态字段自动重写 equals 方法和  hashCode 方法</td>
</tr>
<tr>
<td align="left">@Data</td>
<td>提供了更综合的生成代码功能（@Getter  + @Setter + @ToString + @EqualsAndHashCode）</td>
</tr>
<tr>
<td align="left">@NoArgsConstructor</td>
<td>为实体类生成无参的构造器方法</td>
</tr>
<tr>
<td align="left">@AllArgsConstructor</td>
<td>为实体类生成除了static修饰的字段之外带有各参数的构造器方法。</td>
</tr>
</tbody></table>
<p>使用：</p>
<p>1.引入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在springboot的父工程中，已经集成了lombok并指定了版本号，故当前引入依赖时不需要指定version --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.在实体类上添加注解</p>
<h2 id="Mybatis的基础操作"><a href="#Mybatis的基础操作" class="headerlink" title="Mybatis的基础操作"></a>Mybatis的基础操作</h2><h4 id="日志输入"><a href="#日志输入" class="headerlink" title="日志输入"></a>日志输入</h4><p>打开application.properties文件,配置文件，配置一下属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#指定mybatis输出日志的位置, 输出控制台</span><br><span class="line">mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></figure>

<p>1.删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Mapper</span></span><br><span class="line">public interface EmpMapper &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="operator">/</span><span class="operator">/</span><span class="variable">@Delete</span>(&quot;delete from emp where id = 17&quot;)</span><br><span class="line">    <span class="operator">/</span><span class="operator">/</span>public void <span class="keyword">delete</span>();</span><br><span class="line">    <span class="operator">/</span><span class="operator">/</span>以上<span class="keyword">delete</span>操作的<span class="keyword">SQL</span>语句中的id值写成固定的<span class="number">17</span>，就表示只能删除id<span class="operator">=</span><span class="number">17</span>的用户数据</span><br><span class="line">    <span class="operator">/</span><span class="operator">/</span><span class="keyword">SQL</span>语句中的id值不能写成固定数值，需要变为动态的数值</span><br><span class="line">    <span class="operator">/</span><span class="operator">/</span>解决方案：在<span class="keyword">delete</span>方法中添加一个参数(用户id)，将方法中的参数，传给<span class="keyword">SQL</span>语句</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">    <span class="variable">@Delete</span>(&quot;delete from emp where id = #&#123;id&#125;&quot;)<span class="operator">/</span><span class="operator">/</span>使用#&#123;key&#125;方式获取方法中的参数值</span><br><span class="line">    public void <span class="keyword">delete</span>(<span class="type">Integer</span> id);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>#{id} 是一个占位符，表示要传递给SQL语句的参数值。这个占位符会在实际执行时被具体的参数值替代</p>
<h4 id="预编译SQL"><a href="#预编译SQL" class="headerlink" title="预编译SQL"></a>预编译SQL</h4><p>优势：1.性能更高 2.更安全：防止SQL注入</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20221210202222206.png" alt="image-20221210202222206"></p>
<p>普通的SQL执行过程：解析-优化-编译-执行</p>
<p>预编译SQL：编译一次后将SQL语句缓存起来，后续再执行时，不会再次编译，只是输入的参数不同</p>
<h4 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h4><p>原因：由于没有对用户输入内容进行充分检查，而SQL又是字符串拼接方式而成，在用户输入参数时，在参数中添加一些SQL关键字，达到改变SQL运行结果的目的，从而完成恶意攻击。</p>
<p>举例：一个登录管理系统中，有账户名和密码字段，而判断是否为用户登陆就是，查询用户名和密码字段是否与数据库中的匹配</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp <span class="keyword">where</span> username <span class="operator">=</span> <span class="string">&#x27;&#x27;</span> <span class="keyword">and</span> password <span class="operator">=</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>SQL注入：任意username ，password为 ‘ or ‘1’&#x3D;’1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp <span class="keyword">where</span> username <span class="operator">=</span> <span class="string">&#x27;d&#x27;</span> <span class="keyword">and</span> password <span class="operator">=</span> <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;1&#x27;</span><span class="operator">=</span><span class="string">&#x27;1&#x27;</span></span><br></pre></td></tr></table></figure>

<p>用户在页面提交数据的时候人为的添加一些特殊字符，使得sql语句的结构发生了变化，最终可以在没有用户名或者密码的情况下进行登录。</p>
<h4 id="参数占位符"><a href="#参数占位符" class="headerlink" title="参数占位符"></a>参数占位符</h4><p>在mybatis中提供的参数占位符有两种：${}，#{}</p>
<ul>
<li><p>#{…}</p>
<ul>
<li>执行SQL时，会将#{…}替换为?，生成预编译SQL，会自动设置参数值</li>
<li>使用时机：参数传递，都使用#{…}</li>
</ul>
</li>
<li><p>${…}</p>
<ul>
<li>拼接SQL。直接将参数拼接在SQL语句中，存在SQL注入问题</li>
<li>使用时机：如果对表名、列表进行动态设置时使用</li>
</ul>
</li>
</ul>
<p>用like等模糊查询时，需要使用MySQL提供的字符串拼接函数：concat(‘%’ , ‘关键字’ , ‘%’)，以防止SQL注入问题</p>
<p>在上面我们所编写的条件查询功能中，我们需要保证接口中方法的形参名和SQL语句中的参数占位符名相同。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230925145458269.png" alt="image-20230925145458269"></p>
<h4 id="MyBatista的XML配置文件"><a href="#MyBatista的XML配置文件" class="headerlink" title="MyBatista的XML配置文件"></a>MyBatista的XML配置文件</h4><p>使用MyBatista注解的方式，主要是完成一些简单的增删改查功能</p>
<p>如果需要实现复杂的SQL功能，建议使用XML配置映射，将SQL语句写在XML配置文件中</p>
<p>在MyBatis中使用XML需要符合一定的规范</p>
<p>1.XML映射文件名称与Mapper接口的名称一致，并且将XML映射文件和Mapper接口放置在相同包下（同包同名） 一个接口对应一个相同的XML文件</p>
<p>2.XML映射文件的namespace属性与Mapper接口全限定名一样</p>
<p>3.XML映射文件中SQL语句的id与Mapper接口的方法名称一样，并且保持返回类型一致</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20221212153529732.png" alt="image-20221212153529732"></p>
<p>配置：XML映射文件中sql语句的id与Mapper接口中的方法名一致，并保持返回类型一致</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20221212163528787.png" alt="image-20221212163528787"></p>
<h4 id="Mybatis动态SQL"><a href="#Mybatis动态SQL" class="headerlink" title="Mybatis动态SQL"></a>Mybatis动态SQL</h4><p> SQL语句会随着用户的输入或者外部的条件变化而变化，称为：动态SQL</p>
<p>动态SQL-if</p>
<p><if>：用于判断条件是否成立，使用test进行条件判断，如果条件为TRUE，则拼接</if></p>
<p><where>:<code>&lt;where&gt;</code>只会在子元素有内容的情况下才插入where子句，而且会自动去除子句的开头的AND或OR</where></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.pojo.Emp&quot;</span>&gt;</span></span><br><span class="line">        select * from emp</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!-- if做为where标签的子元素 --&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span></span><br><span class="line">                 and name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">             <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null&quot;</span>&gt;</span></span><br><span class="line">                 and gender = #&#123;gender&#125;</span><br><span class="line">             <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;begin != null and end != null&quot;</span>&gt;</span></span><br><span class="line">                 and entrydate between #&#123;begin&#125; and #&#123;end&#125;</span><br><span class="line">             <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">        order by update_time desc</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><set>:动态的在SQL语句中插入set关键字，并会删掉额外的逗号。（用于update语句中）</set></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span><br><span class="line">    update emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span>username = #&#123;username&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span> name = #&#123;name&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null&quot;</span>&gt;</span>gender = #&#123;gender&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;image != null&quot;</span>&gt;</span>image = #&#123;image&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;job != null&quot;</span>&gt;</span>job = #&#123;job&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;entrydate != null&quot;</span>&gt;</span>entrydate = #&#123;entrydate&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;deptId != null&quot;</span>&gt;</span>dept_id = #&#123;deptId&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime != null&quot;</span>&gt;</span>update_time = #&#123;updateTime&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><foreach>:遍历操作</foreach></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--批量删除员工(1,2,3)</span></span><br><span class="line"><span class="comment">    collection:遍历的集合</span></span><br><span class="line"><span class="comment">    item:遍历出来的元素</span></span><br><span class="line"><span class="comment">    separator:分隔符</span></span><br><span class="line"><span class="comment">    open:遍历开始的SQL片段</span></span><br><span class="line"><span class="comment">    close:遍历结束后的SQL片段</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds&quot;</span>&gt;</span></span><br><span class="line">    delete from emp where id in</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>&lt;sql&gt;</code>：定义可重用的SQL片段</p>
<p><include>&#96;：通过属性refid，指定包含的SQL片段，在原来抽取的地方进行引用</include></p>
<h4 id="案例的开发规范与开发流程"><a href="#案例的开发规范与开发流程" class="headerlink" title="案例的开发规范与开发流程"></a>案例的开发规范与开发流程</h4><h4 id="开发规范-REST"><a href="#开发规范-REST" class="headerlink" title="开发规范-REST"></a>开发规范-REST</h4><p>在前后端进行交互的时候，要基于当前主流的的REST风格的API进行交互</p>
<p>REST是一种风格，REST（Representational State Transfer），表述性状态转换，它是一种软件架构风格。</p>
<p>传统的url风格如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/user/getById?id=1     GET：查询id为1的用户</span><br><span class="line">http://localhost:8080/user/saveUser         POST：新增用户</span><br><span class="line">http://localhost:8080/user/updateUser       POST：修改用户</span><br><span class="line">http://localhost:8080/user/deleteUser?id=1  GET：删除id为1的用户</span><br></pre></td></tr></table></figure>

<p>基于REST风格的URL如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/users/1  GET：查询id为1的用户</span><br><span class="line">http://localhost:8080/users    POST：新增用户</span><br><span class="line">http://localhost:8080/users    PUT：修改用户</span><br><span class="line">http://localhost:8080/users/1  DELETE：删除id为1的用户</span><br></pre></td></tr></table></figure>

<p>总结：通过url定位要操作的资源，通过HTTP请求方式来描述具体的操作</p>
<p>GET：查询  </p>
<p>POST：新增   </p>
<p>PUT：修改</p>
<p>DELETE：删除</p>
<h4 id="开发规范-统一响应流程"><a href="#开发规范-统一响应流程" class="headerlink" title="开发规范-统一响应流程"></a>开发规范-统一响应流程</h4><p>在使用前后端工程交互的时候，统一使用响应结果Result</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;<span class="comment">//响应码，1 代表成功; 0 代表失败</span></span><br><span class="line">    <span class="keyword">private</span> String msg;  <span class="comment">//响应信息 描述字符串</span></span><br><span class="line">    <span class="keyword">private</span> Object data; <span class="comment">//返回的数据</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//增删改 成功响应</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">1</span>,<span class="string">&quot;success&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查询 成功响应</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">(Object data)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">1</span>,<span class="string">&quot;success&quot;</span>,data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//失败响应</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">0</span>,msg,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>开发流程</p>
<p>查看页面原型明确需求–&gt;阅读接口文档–&gt;思路分析–&gt;接口开发–&gt;接口测试–&gt;前后端联调</p>
<p>基本上就是围绕接口文档做开发，要用到spring中的很多注解</p>
<table>
<thead>
<tr>
<th>10月7日</th>
<th></th>
<th>复习相关注解</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>@Pathvarible</td>
<td></td>
<td></td>
<td>将路径url中提取参数并映射到方法参数中</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>@RequestBody</td>
<td></td>
<td></td>
<td>将HTTP请求的具体内容，JSON或者XML</td>
<td>映射到Java对象上</td>
<td></td>
<td></td>
</tr>
<tr>
<td>10月8日</td>
<td></td>
<td>后端按照接口的实现流程</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>Controller控制层</td>
<td></td>
<td></td>
<td>@RequestMapping请求路径 @RequestController控制器 @SLf4j自动定义日志记录对象log</td>
<td>@Autowired依赖注入 deptService对象 @XXXMapping限定请求方式</td>
<td>调用deptService.函数()</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Service逻辑处理层</td>
<td></td>
<td></td>
<td>Service接口：定义接口方法 Service实现类:重写+逻辑处理</td>
<td>@Autowired依赖注入 deptMapper对象</td>
<td>调用deptMapper.函数()</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Dao数据访问层</td>
<td></td>
<td></td>
<td>@Mapper注解：</td>
<td>表示mybatis映射的接口</td>
<td>定义数据库操作的方法</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10月9日</td>
<td></td>
<td>根据接口文档的实现流程</td>
<td></td>
<td></td>
<td>请求路径：url 请求方式：get set put 请求参数;json</td>
<td>@RequestMapping&#x2F;@PathVarible @GetMapping @RequestBody</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10月10日</td>
<td></td>
<td>分页查询插件PageHelper</td>
<td></td>
<td></td>
<td>PageHelper.startPage()设置分页参数</td>
<td>将查询结果强转为Page类型</td>
<td>调用page方法，getTotalgetResult</td>
</tr>
<tr>
<td></td>
<td>@RequestParam</td>
<td></td>
<td></td>
<td>defaultvalue，如果没有，设置默认值</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>写了份表格记录一下</p>
<p>大体的开发流程就是</p>
<p>1.根据接口文档确定是什么请求，一般是请求路径和请求方式</p>
<p>请求路径就是&#x2F;emp&#x2F;upload等等，请求方式：POST，GET，DELETE，等等</p>
<p>判断是否有路径参数或者请求参数等</p>
<p>2.在控制层，用XXXXMapping接受路径&#x2F;emp这些，定义一个类型为Result的返回函数，去接受参数</p>
<p>如果请求传递的是路径参数，就用注解@PathVariable接受</p>
<p>如果请求参数是JSON格式的，就需要自己定一个对象，对象的私有属性包含这些，必须同名称，然后用注解</p>
<p>@RequestBody接受，将请求参数封装到实体类的私有属性中，再去调用</p>
<p>3.在控制层用@AutoWired自动注入service层的接口对象，调用service接口层中声明的方法，</p>
<p>定义业务实现类serviceImpl，具体实现这些方法，做一些逻辑处理，并且在类中，自动注入mybatis层的对象</p>
<p>4.在数据控制层就是Mybatis层，用注解@Mapper，这里主要是一些调用数据库的操作</p>
<p>用注解@Select,@delete等等，注解地下声明一个方法，用于接受查询返回的值</p>
<p>或者在resource层中定义xml配置文件，xml配置文件的位置定义要有讲究，在resource层下，要与mapper层的包名类名相同，在xml配置文件中定义动态查询语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> EmpService empService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">page</span><span class="params">(<span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer page,</span></span><br><span class="line"><span class="params">                   <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                    String name,</span></span><br><span class="line"><span class="params">                    Short gender,</span></span><br><span class="line"><span class="params">                   <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span> LocalDate begin,</span></span><br><span class="line"><span class="params">                   <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span> LocalDate end</span></span><br><span class="line"><span class="params">                   )</span> &#123;</span><br><span class="line">    log.info(<span class="string">&quot;分页查询部门数据&quot;</span>);</span><br><span class="line">    <span class="type">PageBean</span> <span class="variable">pageBean</span> <span class="operator">=</span> empService.page(page,pageSize,name,gender,begin,end);</span><br><span class="line">    <span class="keyword">return</span> Result.success(pageBean);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@RequestParam(defaultValue = &quot;1&quot;) Integer page</code>：这是一个查询参数，用于指定页码，默认值是 1。<code>@RequestParam</code> 用于从请求中获取名为 <code>page</code> 的参数值。如果请求中没有 <code>page</code> 参数，它将使用默认值 1。</p>
<p>在 Spring MVC 中，默认情况下，如果方法参数的名称与请求中的查询参数名称匹配，Spring 将自动将请求参数值绑定到方法参数，无需显式使用 <code>@RequestParam</code> 注解。这意味着当客户端发送一个请求，其中包含名为 <code>name</code> 和 <code>gender</code> 的查询参数时，Spring 将自动将它们绑定到方法的 <code>name</code> 和 <code>gender</code> 参数上。</p>
<h4 id="文件上传功能"><a href="#文件上传功能" class="headerlink" title="文件上传功能"></a>文件上传功能</h4><p>1.前端程序，定义form表单</p>
<p>我们先来看看在前端程序中要完成哪些代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">	姓名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    年龄: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    头像: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;image&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上传文件的原始form表单，要求表单必须具备以下三点（上传文件页面三要素）：</p>
<ul>
<li><p>表单必须有file域，用于选择要上传的文件</p>
<blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;image&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>表单提交方式必须为POST</p>
<blockquote>
<p>通常上传的文件会比较大，所以需要使用 POST 提交方式</p>
</blockquote>
</li>
<li><p>表单的编码类型enctype必须要设置为：multipart&#x2F;form-data</p>
<blockquote>
<p>普通默认的编码格式是不适合传输大型的二进制数据的，所以在文件上传时，表单的编码格式必须设置为multipart&#x2F;form-data</p>
</blockquote>
</li>
</ul>
<p>2.后端程序</p>
<p>​	在服务端定义一个Controller用于文件的上传，在controller中定义一个方法，来处理&#x2F;upload请求</p>
<p>​	在定义的方法中接收提交过来的数据（形参名称和请求参数名称保持一致）不一样用@RequestParam</p>
<p>​	spring中提供了一个API：MultipartFile  image 接收文件</p>
<p>MultipartFile 常见方法： </p>
<ul>
<li>String  getOriginalFilename();  &#x2F;&#x2F;获取原始文件名</li>
<li>void  transferTo(File dest);     &#x2F;&#x2F;将接收的文件转存到磁盘文件中</li>
<li>long  getSize();     &#x2F;&#x2F;获取文件的大小，单位：字节</li>
<li>byte[]  getBytes();    &#x2F;&#x2F;获取文件内容的字节数组</li>
<li>InputStream  getInputStream();    &#x2F;&#x2F;获取接收到的文件内容的输入流</li>
</ul>
<p>用image.XXX调用即可</p>
<p>并且使用UUID获取随机文件名称，保证每次上传时候的文件名称都是唯一的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UploadController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(String username, Integer age, MultipartFile image)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        log.info(<span class="string">&quot;文件上传：&#123;&#125;,&#123;&#125;,&#123;&#125;&quot;</span>,username,age,image);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取原始文件名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> image.getOriginalFilename();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//构建新的文件名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">extname</span> <span class="operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));<span class="comment">//文件扩展名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">newFileName</span> <span class="operator">=</span> UUID.randomUUID().toString()+extname;<span class="comment">//随机名+文件扩展名</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//将文件存储在服务器的磁盘目录</span></span><br><span class="line">        image.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:/images/&quot;</span>+newFileName));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上只是将上传的文件保存到本地</p>
<p>上传到阿里云OSS（Object Storage Service）</p>
<p>注册:获得阿里云的AccessKey，bucketname等信息</p>
<p>参照官方实例文档的SDK</p>
<p>在Maven项目中使用OSS的SDK，只需要pom文件中添加相应的pom依赖即可</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20231029151527018.png" alt="image-20231029151527018"></p>
<p>导入依赖后，修改官方参考文档，调用oss中的相关函数，实现文件的上传</p>
<p>使用唯一的UUID确保上传的文件名称唯一</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClientBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSUtils</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">endpoint</span> <span class="operator">=</span> <span class="string">&quot;https://oss-cn-shanghai.aliyuncs.com&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">accessKeyId</span> <span class="operator">=</span> <span class="string">&quot;LTAI5t9MZK8iq5T2Av5GLDxX&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">accessKeySecret</span> <span class="operator">=</span> <span class="string">&quot;C0IrHzKZGKqU8S7YQcevcotD3Zd5Tc&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">bucketName</span> <span class="operator">=</span> <span class="string">&quot;web-framework01&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实现上传图片到OSS</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(MultipartFile multipartFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 获取上传的文件的输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> multipartFile.getInputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 避免文件覆盖</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> multipartFile.getOriginalFilename();</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> UUID.randomUUID().toString() + originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//上传文件到 OSS</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line">        ossClient.putObject(bucketName, fileName, inputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//文件访问路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;//&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">1</span>] + <span class="string">&quot;/&quot;</span> + fileName;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭ossClient</span></span><br><span class="line">        ossClient.shutdown();</span><br><span class="line">        <span class="keyword">return</span> url;<span class="comment">// 把上传到oss的路径返回</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后返回的url就是图片的地址，例如：</p>
<p><a target="_blank" rel="noopener" href="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/01b43569-4c97-4efe-8e0a-7631044b4ac1.jpg">https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/01b43569-4c97-4efe-8e0a-7631044b4ac1.jpg</a></p>
<p>用网址打开会直接显示下载，在前端的页面就会直接渲染出来</p>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>上述阿里云的配置信息写死在了代码中（硬编码）</p>
<p>缺点：在源码中重新改动，要重新编译，配置参数过于分散，不便于集中维护和管理</p>
<p>解决方法1：在application.properties中定义配置信息，再使用注解@Value注入</p>
<p>@Value 注解通常用于外部配置的属性注入，具体用法为： @Value(“${配置文件中的key}”)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230102173905913.png" alt="image-20230102173905913"></p>
<h4 id="yml配置文件"><a href="#yml配置文件" class="headerlink" title="yml配置文件"></a>yml配置文件</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230102181215809.png" alt="image-20230102181215809"></p>
<p>简单的了解过springboot所支持的配置文件，以及不同类型配置文件之间的优缺点之后，接下来我们就来了解下yml配置文件的基本语法：</p>
<ul>
<li>大小写敏感</li>
<li>数值前边必须有空格，作为分隔符</li>
<li>使用缩进表示层级关系，缩进时，不允许使用Tab键，只能用空格（idea中会自动将Tab转换为空格）</li>
<li>缩进的空格数目不重要，只要相同层级的元素左侧对齐即可</li>
<li><code>#</code>表示注释，从这个字符一直到行尾，都会被解析器忽略</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230103084645450.png" alt="image-20230103084645450"></p>
<p>了解完yml格式配置文件的基本语法之后，接下来我们再来看下yml文件中常见的数据格式。在这里我们主要介绍最为常见的两类：</p>
<ol>
<li>定义对象或Map集合</li>
<li>定义数组、list或set集合</li>
</ol>
<p>对象&#x2F;Map集合</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">user:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">  <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></table></figure>

<p>数组&#x2F;List&#x2F;Set集合</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hobby:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">java</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">game</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sport</span></span><br></pre></td></tr></table></figure>

<p>@ConfigurationProperties(prefix &#x3D; “aliyun.oss”)</p>
<p>Spring提供的简化方式套路：</p>
<ol>
<li><p>需要创建一个实现类，且实体类中的属性名和配置文件当中key的名字必须要一致</p>
<blockquote>
<p>比如：配置文件当中叫endpoints，实体类当中的属性也得叫endpoints，另外实体类当中的属性还需要提供 getter &#x2F; setter方法</p>
</blockquote>
</li>
<li><p>需要将实体类交给Spring的IOC容器管理，成为IOC容器当中的bean对象@Compoent</p>
</li>
<li><p>在实体类上添加<code>@ConfigurationProperties</code>注解，并通过perfect属性来指定配置参数项的前缀</p>
</li>
<li><p>直接@Autowired自动注入bean对象，调用get方法获取到属性值即可</p>
</li>
</ol>
<p>分</p>
<h4 id="登录认证："><a href="#登录认证：" class="headerlink" title="登录认证："></a>登录认证：</h4><p>新建LoginController控制层，service层和mapper，因为是底层校验员工的数据，所以还是用员工emp层的即可</p>
<p>select * from emp where userame &#x3D; #{} and pasword &#x3D; #{}</p>
<p>返回查询到的员工信息，判断是否为null，判断成功或者失败</p>
<p>直接登陆的功能有漏洞，开发的接口功能在服务端没有做任何的判断，就去实现，所以无论用于是否登陆，都能执行数据的操作，所以需要登陆校验</p>
<h4 id="登陆校验"><a href="#登陆校验" class="headerlink" title="登陆校验"></a>登陆校验</h4><p>HTTP协议是无状态协议，每次请求都是独立的，下次的请求不会携带上一次的数据，所以我们在执行业务操作的时候，服务器也不知道这个员工是否登陆了</p>
<p>解决方法：</p>
<p>1.登陆标记</p>
<p>2.同意拦截，登陆校验</p>
<h4 id="会话技术"><a href="#会话技术" class="headerlink" title="会话技术"></a>会话技术</h4><p>会话跟踪技术有两种：</p>
<ol>
<li>Cookie（客户端会话跟踪技术）<ul>
<li>数据存储在客户端浏览器当中</li>
</ul>
</li>
<li>Session（服务端会话跟踪技术）<ul>
<li>数据存储在储在服务端</li>
</ul>
</li>
<li>令牌技术</li>
</ol>
<p>在用户打开浏览器第一次访问服务器的时候，这个会话就建立了，直到有任何一方断开连接，此时会话就结束了。在一次会话当中，是可以包含多次请求和响应的。</p>
<h5 id="方案一：cookie"><a href="#方案一：cookie" class="headerlink" title="方案一：cookie"></a>方案一：cookie</h5><p>cookie是会话跟踪技术，存储在客户端浏览器的，<strong>第一次发起请求的时候，在服务器设置一个cookie</strong>，在cookie中存储用户相关的一些数据信息，例如：登陆的用户名称，id等等</p>
<p>之后服务端在给客户端响应的时候，同时会将cookie响应给浏览器，浏览器收到cookie后，会自动将其存储在浏览器本地，在后面的每一次请求之后，都会将本地存储的cookie自动携带到服务端，服务端就会判断是否存在cookie的数值，如果有，就说明之前已经登陆完成了，，基于cookie的在同一次会话的不同请求之间共享数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cookie会话跟踪技术的主要过程</span><br><span class="line">1.客户端发起请求</span><br><span class="line">2.服务器处理请求：服务器会在响应中包含一个Set-Cookie头部，用来设置cookie</span><br><span class="line">3.设置cookie：浏览器接收到服务器的响应后，会解析set-cookie，将其中的cookie信息保存到浏览器本地中</span><br><span class="line">4.发送请求：浏览器再次向服务端发起请求，浏览器会将cookie包含在请求头中，发送给服务器</span><br><span class="line">5.服务器读取cookie，根据cookie的内容，识别用户的身份，会话状态等信息</span><br><span class="line">6.服务器根据收到的 Cookie 信息，对请求进行处理。根据需要，可以向客户端发送新的 Cookie 信息，更新会话状态。</span><br><span class="line">7，重复1-6步</span><br></pre></td></tr></table></figure>



<p>cookie是浏览器HTTP协议之中所支持的数据，所以</p>
<p>用了 3 个自动：</p>
<ul>
<li><p>服务器会 <strong>自动</strong> 的将 cookie 响应给浏览器。</p>
</li>
<li><p>浏览器接收到响应回来的数据之后，会 <strong>自动</strong> 的将 cookie 存储在浏览器本地。</p>
</li>
<li><p>在后续的请求当中，浏览器会 <strong>自动</strong> 的将 cookie 携带到服务器端。</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230112101804878.png" alt="image-20230112101804878"></p>
<p>cookie的优缺点</p>
<p>优点：HTTP协议之中支持的技术，浏览器自动响应，存储cookie，无需我们手动进行</p>
<p>缺点：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">移动端无法使用cookie，浏览器设置中可以自己禁止使用cookie</span><br><span class="line"></span><br><span class="line">​开发中通常前端Tomcat和服务器端会部署在不同的的服务器中，IP地址和端口号各不相同</span><br><span class="line"></span><br><span class="line">​就存在跨域操作，cookie无法跨域</span><br></pre></td></tr></table></figure>

<p>补充:区分跨域的维度：</p>
<ul>
<li>协议</li>
<li>IP&#x2F;协议</li>
<li>端口</li>
</ul>
<p>只要上述的三个维度有任何一个维度不同，那就是跨域操作</p>
<h5 id="方案二：Session会话跟踪"><a href="#方案二：Session会话跟踪" class="headerlink" title="方案二：Session会话跟踪"></a>方案二：Session会话跟踪</h5><p>底层基于cookie实现的，但是存储在服务器端，相较于cookie更安全一些</p>
<p>前面介绍的时候，我们提到Session，它是服务器端会话跟踪技术，所以它是存储在服务器端的。而 Session 的底层其实就是基于我们刚才所介绍的 Cookie 来实现的。</p>
<ul>
<li><p>获取Session</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230112105938545.png" alt="image-20230112105938545"> </p>
<p>如果我们现在要基于 Session 来进行会话跟踪，浏览器在第一次请求服务器的时候，我们就可以直接在服务器当中来获取到会话对象Session。如果是第一次请求Session ，会话对象是不存在的，这个时候服务器会自动的创建一个会话对象Session 。而每一个会话对象Session ，它都有一个ID（示意图中Session后面括号中的1，就表示ID），我们称之为 Session 的ID。</p>
</li>
<li><p>响应Cookie (JSESSIONID)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230112110441075.png" alt="image-20230112110441075"> </p>
<p>接下来，服务器端在给浏览器响应数据的时候，它会将 Session 的 ID 通过 Cookie 响应给浏览器。其实在响应头当中增加了一个 Set-Cookie 响应头。这个  Set-Cookie  响应头对应的值是不是cookie？ cookie 的名字是固定的 JSESSIONID 代表的服务器端会话对象 Session 的 ID。浏览器会自动识别这个响应头，然后自动将Cookie存储在浏览器本地。</p>
</li>
<li><p>查找Session</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230112101943835.png" alt="image-20230112101943835"> </p>
<p>接下来，在后续的每一次请求当中，都会将 Cookie 的数据获取出来，并且携带到服务端。接下来服务器拿到JSESSIONID这个 Cookie 的值，也就是 Session 的ID。拿到 ID 之后，就会从众多的 Session 当中来找到当前请求对应的会话对象Session。</p>
</li>
</ul>
<p><strong>优缺点</strong></p>
<ul>
<li>优点：Session是存储在服务端的，安全</li>
<li>缺点：<ul>
<li>服务器集群环境下无法直接使用Session</li>
<li>移动端APP(Android、IOS)中无法使用Cookie</li>
<li>用户可以自己禁用Cookie</li>
<li>Cookie不能跨域</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1.客户端发起请求： 用户在浏览器中输入网址或点击链接，向服务器发起请求。</span><br><span class="line"></span><br><span class="line">2.服务器处理请求： 服务器接收到请求后，根据请求的内容进行处理。如果需要进行会话跟踪，服务器会为每个客户端创建一个唯一的会话标识，并将该会话标识与客户端关联起来。</span><br><span class="line"></span><br><span class="line">3.生成 Session ID： 在服务器端生成一个唯一的 Session ID，用来标识当前会话。Session ID 可以是一个随机生成的字符串，也可以是其他形式的唯一标识符。</span><br><span class="line"></span><br><span class="line">4.存储 Session 数据： 服务器将生成的 Session ID 与会话数据进行关联，并将该关联保存在服务器端的存储介质中，如内存、数据库、文件系统等。会话数据可以包含用户的身份信息、会话状态、购物车内容等。</span><br><span class="line"></span><br><span class="line">5.返回 Session ID： 服务器在响应中包含一个 Set-Cookie 头部，用来设置一个名为 &quot;JSESSIONID&quot; 的 Cookie，并将 Session ID 的值设置为该 Cookie 的内容。这样，客户端在收到响应后就会保存 Session ID。</span><br><span class="line"></span><br><span class="line">6.发送请求： 当用户再次向服务器发起请求时，浏览器会自动将之前保存的 Session ID 包含在请求头中，并发送给服务器。</span><br><span class="line"></span><br><span class="line">7.读取 Session 数据： 服务器接收到请求后，从请求头中读取到 Session ID。根据 Session ID，服务器可以在存储介质中检索到相应的会话数据，并根据需要进行处理。</span><br><span class="line"></span><br><span class="line">8.处理请求： 服务器根据收到的 Session 数据，对请求进行处理。根据需要，可以更新会话状态、添加新的会话数据等。</span><br><span class="line"></span><br><span class="line">重复步骤 6~8： 在会话过程中，客户端和服务器会持续交互，根据需要更新和读取 Session 数据，以实现持续的会话跟踪。</span><br></pre></td></tr></table></figure>

<p>一般企业项目不会部署在同一个服务器上的，因为一个挂了就没法访问了，所以是服务器集群</p>
<p>会有一个均衡负载服务器，将前端请求均匀的分发给集群的服务器</p>
<h5 id="方案三：令牌技术"><a href="#方案三：令牌技术" class="headerlink" title="方案三：令牌技术"></a>方案三：令牌技术</h5><p>​	在请求登陆接口的时候，如果登陆成功，就生成一个令牌，令牌就是用户的合法身份凭证，接下来响应数据的时候，将令牌响应给前端</p>
<p>​	接下来我们在前端程序当中接收到令牌之后，就需要将这个令牌存储起来。这个存储可以存储在 cookie 当中，也可以存储在其他的存储空间(比如：localStorage)当中。</p>
<p>​	接下来，在后续的每一次请求当中，都需要将令牌携带到服务端。携带到服务端之后，接下来我们就需要来校验令牌的有效性。如果令牌是有效的，就说明用户已经执行了登录操作，如果令牌是无效的，就说明用户之前并未执行登录操作。</p>
<p><strong>优缺点</strong></p>
<ul>
<li>优点：<ul>
<li>支持PC端、移动端</li>
<li>解决集群环境下的认证问题</li>
<li>减轻服务器的存储压力（无需在服务器端存储）</li>
</ul>
</li>
<li>缺点：需要自己实现（包括令牌的生成、令牌的传递、令牌的校验）</li>
</ul>
<h4 id="JWT令牌：JSON-Web-Token"><a href="#JWT令牌：JSON-Web-Token" class="headerlink" title="JWT令牌：JSON Web Token"></a>JWT令牌：JSON Web Token</h4><p>定义了一种简洁的，自包含的，用于通信双方以JSON数据格式安全传递信息，由于数字签名的存在，这些信息是可靠的。</p>
<p>组成：三部分组成</p>
<p>第一部分：head头，记录令牌的类型，签名是算法</p>
<p>第二部分：payload有效载荷，携带一些自定义，默认的信息</p>
<p>第三部分：数字签名：防止token被篡改等</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230106085442076.png" alt="image-20230106085442076"></p>
<blockquote>
<p>JWT是如何将原始的JSON格式数据，转变为字符串的呢？</p>
<p>其实在生成JWT令牌时，会对JSON格式的数据进行一次编码：进行base64编码</p>
<p>Base64：是一种基于64个可打印的字符来表示二进制数据的编码方式。既然能编码，那也就意味着也能解码。所使用的64个字符分别是A到Z、a到z、 0- 9，一个加号，一个斜杠，加起来就是64个字符。任何数据经过base64编码之后，最终就会通过这64个字符来表示。当然还有一个符号，那就是等号。等号它是一个补位的符号</p>
<p>需要注意的是Base64是编码方式，而不是加密方式。</p>
</blockquote>
<p>jwt令牌的应用场景：登录认证</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.登陆成功后，生成一个jwt令牌，并且返回给前端</span><br><span class="line"></span><br><span class="line">2.前端拿到存储起来，后续每一次的请求都会将jwt令牌携带到服务器端口</span><br><span class="line"></span><br><span class="line">3.服务器端口，统一拦截请求后，判断和校验jwt令牌，通过即可放行处理</span><br></pre></td></tr></table></figure>



<p>生成JWT令牌：引入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JWT依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>调用依赖jar包中的相关函数，实现JWT令牌的生成和校验，具体代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">signKey</span> <span class="operator">=</span> <span class="string">&quot;itheima&quot;</span>;<span class="comment">//签名密钥</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Long</span> <span class="variable">expire</span> <span class="operator">=</span> <span class="number">43200000L</span>; <span class="comment">//有效时间</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成JWT令牌</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> claims JWT第二部分负载 payload 中存储的内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateJwt</span><span class="params">(Map&lt;String, Object&gt; claims)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> Jwts.builder()</span><br><span class="line">                .addClaims(claims)<span class="comment">//自定义信息（有效载荷）</span></span><br><span class="line">                .signWith(SignatureAlgorithm.HS256, signKey)<span class="comment">//签名算法（头部）</span></span><br><span class="line">                .setExpiration(<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis() + expire))<span class="comment">//过期时间</span></span><br><span class="line">                .compact();</span><br><span class="line">        <span class="keyword">return</span> jwt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析JWT令牌</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jwt JWT令牌</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> JWT第二部分负载 payload 中存储的内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Claims <span class="title function_">parseJWT</span><span class="params">(String jwt)</span>&#123;</span><br><span class="line">        <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> Jwts.parser()</span><br><span class="line">                .setSigningKey(signKey)<span class="comment">//指定签名密钥</span></span><br><span class="line">                .parseClaimsJws(jwt)<span class="comment">//指定令牌Token</span></span><br><span class="line">                .getBody();</span><br><span class="line">        <span class="keyword">return</span> claims;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="过滤器Filter"><a href="#过滤器Filter" class="headerlink" title="过滤器Filter"></a>过滤器Filter</h4><p>Filter是过滤器，是Javaweb三大组件之一：Servlet，Filter，Listener</p>
<p>把资源对应的请求拦截下来，实现过滤，过滤器处理完毕以后，才能够访问对应的资源</p>
<p>应用场景：比如：统一校验，统一编码处理，敏感字符处理等</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230106222559935.png" alt="image-20230106222559935"></p>
<p><strong>1.定义过滤器</strong>：定义一个类，实现servlet中的Filter接口，并且重写其方法</p>
<p>Filter中有三个方法，分别对应</p>
<p>init过滤器的初始化，web服务器启动的时候 会自动创建Filter过滤器对象</p>
<p>doFilter拦截到后调用，每一次拦截到请求之后都会调用</p>
<p>destroy销毁方法后调用，关闭服务的时候会调用</p>
<p><strong>2.配置过滤器</strong>：在Filter类上加@WebFilter注解@WebFilter(urlPatterns &#x3D; “&#x2F;*”)&#x2F;&#x2F;表示拦截所有的请求</p>
<p>由于springboot中不包含对web组件servlet的支持，所以要在引导类上加@ServletComponentScan</p>
<p>开启servlet组件的支持。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(urlPatterns = &quot;/*&quot;)</span> <span class="comment">//配置过滤器要拦截的请求路径（ /* 表示拦截浏览器的所有请求 ）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">//初始化方法, 只调用一次</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init 初始化方法执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">//拦截到请求之后调用, 调用多次</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Demo 拦截到了请求...放行前逻辑&quot;</span>);</span><br><span class="line">        <span class="comment">//放行</span></span><br><span class="line">        chain.doFilter(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">//销毁方法, 只调用一次</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;destroy 销毁方法执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>执行流程我们搞清楚之后，接下来再来介绍一下过滤器的拦截路径，Filter可以根据需求，配置不同的拦截资源路径：</p>
<table>
<thead>
<tr>
<th>拦截路径</th>
<th>urlPatterns值</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>拦截具体路径</td>
<td>&#x2F;login</td>
<td>只有访问 &#x2F;login 路径时，才会被拦截</td>
</tr>
<tr>
<td>目录拦截</td>
<td>&#x2F;emps&#x2F;*</td>
<td>访问&#x2F;emps下的所有资源，都会被拦截</td>
</tr>
<tr>
<td>拦截所有</td>
<td>&#x2F;*</td>
<td>访问所有资源，都会被拦截</td>
</tr>
</tbody></table>
<p><strong>过滤器链：</strong>一个web中，可以配置多个过滤器，形成一个过滤器链</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230107084730393.png" alt="image-20230107084730393"></p>
<p>过滤器链的执行顺序：通过注解@WebFilter配置的过滤器，优先级是通过按照过滤器的类名称（字符串)自然排序</p>
<h4 id="登陆校验流程"><a href="#登陆校验流程" class="headerlink" title="登陆校验流程"></a>登陆校验流程</h4><p>-在doFilter函数中具体要操作的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.获取请求url</span><br><span class="line"></span><br><span class="line">2.判断url中是否包含/login。如果包含，就是第一次登陆，放行</span><br><span class="line"></span><br><span class="line">3.获取请求头中的token的值jwt令牌</span><br><span class="line"></span><br><span class="line">4.判断令牌是否存在，如果不存在，返回错误结果</span><br><span class="line"></span><br><span class="line">5.解析token，如果解析失败，返回错误</span><br><span class="line"></span><br><span class="line">6.成功，放行</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &quot;/*&quot;)</span> <span class="comment">//拦截所有请求</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheckFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">//前置：强制转换为http协议的请求对象、响应对象 （转换原因：要使用子类中特有方法）</span></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.获取请求url</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> request.getRequestURL().toString();</span><br><span class="line">        log.info(<span class="string">&quot;请求路径：&#123;&#125;&quot;</span>, url); <span class="comment">//请求路径：http://localhost:8080/login</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.判断请求url中是否包含login，如果包含，说明是登录操作，放行</span></span><br><span class="line">        <span class="keyword">if</span>(url.contains(<span class="string">&quot;/login&quot;</span>))&#123;</span><br><span class="line">            chain.doFilter(request, response);<span class="comment">//放行请求</span></span><br><span class="line">            <span class="keyword">return</span>;<span class="comment">//结束当前方法的执行</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.获取请求头中的令牌（token）</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        log.info(<span class="string">&quot;从请求头中获取的令牌：&#123;&#125;&quot;</span>,token);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.判断令牌是否存在，如果不存在，返回错误结果（未登录）</span></span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.hasLength(token))&#123;</span><br><span class="line">            log.info(<span class="string">&quot;Token不存在&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">Result</span> <span class="variable">responseResult</span> <span class="operator">=</span> Result.error(<span class="string">&quot;NOT_LOGIN&quot;</span>);</span><br><span class="line">            <span class="comment">//把Result对象转换为JSON格式字符串 (fastjson是阿里巴巴提供的用于实现对象和json的转换工具类)</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> JSONObject.toJSONString(responseResult);</span><br><span class="line">            response.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">            <span class="comment">//响应</span></span><br><span class="line">            response.getWriter().write(json);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.解析token，如果解析失败，返回错误结果（未登录）</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            JwtUtils.parseJWT(token);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            log.info(<span class="string">&quot;令牌解析失败!&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">Result</span> <span class="variable">responseResult</span> <span class="operator">=</span> Result.error(<span class="string">&quot;NOT_LOGIN&quot;</span>);</span><br><span class="line">            <span class="comment">//把Result对象转换为JSON格式字符串 (fastjson是阿里巴巴提供的用于实现对象和json的转换工具类)</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> JSONObject.toJSONString(responseResult);</span><br><span class="line">            response.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">            <span class="comment">//响应</span></span><br><span class="line">            response.getWriter().write(json);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.放行</span></span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h3><p>类似于过滤器，是springboot框架中提供的，用来动态拦截控制方法的执行</p>
<p>在拦截器中，拦截前端发起的请求，将登陆校验的逻辑全部写在拦截器当中，</p>
<p>拦截器的使用步骤：1.定义拦截器，2.注册配置拦截器</p>
<p><strong>自定义拦截器</strong>：实现HandlerInterceptor接口，并且重写其所有方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义拦截器</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//将该类交给IOC容器管理</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheckInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="comment">//目标资源方法执行前执行。 返回true：放行    返回false：不放行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;preHandle .... &quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//true表示放行</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//目标资源方法执行后执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle ... &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//视图渲染完毕后执行，最后执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion .... &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注册配置拦截器</strong>：实现WebMvcConfigurer接口，并且重写addInterceptor方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//说明该类是配置类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//自定义的拦截器对象</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> LoginCheckInterceptor loginCheckInterceptor;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">       <span class="comment">//注册自定义拦截器对象</span></span><br><span class="line">        registry.addInterceptor(loginCheckInterceptor).addPathPatterns(<span class="string">&quot;/**&quot;</span>);<span class="comment">//设置拦截器拦截的请求路径（ /** 表示拦截所有请求）</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>拦截路径</strong>：首先我们先来看拦截器的拦截路径的配置，在注册配置拦截器的时候，我们要指定拦截器的拦截路径，通过<code>addPathPatterns(&quot;要拦截路径&quot;)</code>方法，就可以指定要拦截哪些资源。</p>
<p>在入门程序中我们配置的是<code>/**</code>，表示拦截所有资源，而在配置拦截器时，不仅可以指定要拦截哪些资源，还可以指定不拦截哪些资源，只需要调用<code>excludePathPatterns(&quot;不拦截路径&quot;)</code>方法，指定哪些资源不需要拦截。</p>
<p>在拦截器中除了可以设置<code>/**</code>拦截所有资源外，还有一些常见拦截路径设置：</p>
<table>
<thead>
<tr>
<th>拦截路径</th>
<th>含义</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;*</td>
<td>一级路径</td>
<td>能匹配&#x2F;depts，&#x2F;emps，&#x2F;login，不能匹配 &#x2F;depts&#x2F;1</td>
</tr>
<tr>
<td>&#x2F;**</td>
<td>任意级路径</td>
<td>能匹配&#x2F;depts，&#x2F;depts&#x2F;1，&#x2F;depts&#x2F;1&#x2F;2</td>
</tr>
<tr>
<td>&#x2F;depts&#x2F;*</td>
<td>&#x2F;depts下的一级路径</td>
<td>能匹配&#x2F;depts&#x2F;1，不能匹配&#x2F;depts&#x2F;1&#x2F;2，&#x2F;depts</td>
</tr>
<tr>
<td>&#x2F;depts&#x2F;**</td>
<td>&#x2F;depts下的任意级路径</td>
<td>能匹配&#x2F;depts，&#x2F;depts&#x2F;1，&#x2F;depts&#x2F;1&#x2F;2，不能匹配&#x2F;emps&#x2F;1</td>
</tr>
</tbody></table>
<p>拦截器和过滤器的执行流程：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240308102935645.png" alt="image-20240308102935645"></p>
<p>1.Tomcat并不识别所编写的Controller程序，但是它识别Servlet程序，所以在Spring的Web环境中提供了一个非常核心的Servlet：DispatcherServlet（前端控制器），所有请求都会先进行到DispatcherServlet，再将请求转给Controller。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Filter过滤器和Interceptor拦截器</span><br><span class="line">接口规范不同：Filter是Servlet规范的接口，属于servlet容器的一部分，而interceptor是spring框架中提供的一种拦截机制，属于springMVC中的一部分</span><br><span class="line"></span><br><span class="line">拦截范围不同：过滤器会拦截所有资源，而拦截器只会拦截spring环境中的资源</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><p>1.在所有的Controller的方法中，进行try…catch处理（代码臃肿）</p>
<p>2.全局异常处理：定义全局异常处理器</p>
<ul>
<li>定义全局异常处理器非常简单，就是定义一个类，在类上加上一个注解@RestControllerAdvice，加上这个注解就代表我们定义了一个全局异常处理器。</li>
<li>在全局异常处理器当中，需要定义一个方法来捕获异常，在这个方法上需要加上注解@ExceptionHandler。通过@ExceptionHandler注解当中的value属性来指定我们要捕获的是哪一类型的异常。</li>
</ul>
<p>@RestControllerAdvice<br>public class GlobalExceptionHandler {</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span> <span class="comment">//指定能够处理的异常类型</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">ex</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">        e.printStackTrace();<span class="comment">//打印堆栈中的异常信息</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//捕获到异常之后，响应一个标准的Result</span></span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;对不起,操作失败,请联系管理员&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="事务管理-AOP"><a href="#事务管理-AOP" class="headerlink" title="事务管理&amp;AOP"></a>事务管理&amp;AOP</h2><p>事务：事务是一组操作的集合，这些操作要么同时成功，要么同时失败</p>
<p>事务的操作主要有三步：</p>
<ol>
<li>开启事务（一组操作开始前，开启事务）：start transaction &#x2F; begin ;</li>
<li>提交事务（这组操作全部成功后，提交事务）：commit ;</li>
<li>回滚事务（中间任何一个操作出现异常，回滚事务）：rollback ;</li>
</ol>
<p>@Transactional注解：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Transaction作用：在当前方法执行前开启事务，方法执行完毕后结束事务，如果在这个方法执行的过程中出现了异常，就会进行事务的回滚操作</span><br><span class="line"></span><br><span class="line">作用地点：通常在业务层service层添加注解，因为在业务层中，一个业务的功能可能会包含多个数据操作的访问，在业务层控制事务，就可以将多个数据访问的操作控制在一个事物的范围内</span><br><span class="line"></span><br><span class="line">书写位置：方法：当前方法交给spring进行事务管理</span><br><span class="line">		类：当前类中的所有方法都交给事务管理</span><br><span class="line">		接口：接口下所有实现类中的所有方法都交给spring事务管理</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="事物进阶："><a href="#事物进阶：" class="headerlink" title="事物进阶："></a>事物进阶：</h3><p>@Transaction中的两个属性</p>
<p>1.事物回滚的异常属性：rollbackFor():</p>
<p>2.事物传播行为：propagation()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Transactional(rollbackFor=Exception.class)</span></span><br><span class="line"> &gt; 结论：</span><br><span class="line">&gt;</span><br><span class="line">&gt; - 在Spring的事务管理中，默认只有运行时异常 RuntimeException才会回滚。</span><br><span class="line">&gt; - 如果还需要回滚指定类型的异常，可以通过rollbackFor属性来指定。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>propagation：</p>
<p>用来控制事务的传播属性，就是当一个事物方法被另一个事物方法调用时候，这个事物方法该如何进行事务控制</p>
<p>我们要想控制事务的传播行为，在@Transactional注解的后面指定一个属性propagation，通过 propagation 属性来指定传播行为。接下来我们就来介绍一下常见的事务传播行为。</p>
<table>
<thead>
<tr>
<th><strong>属性值</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>REQUIRED</td>
<td>【默认值】需要事务，有则加入，无则创建新事务</td>
</tr>
<tr>
<td>REQUIRES_NEW</td>
<td>需要新事务，无论有无，总是创建新事务</td>
</tr>
<tr>
<td>SUPPORTS</td>
<td>支持事务，有则加入，无则在无事务状态中运行</td>
</tr>
<tr>
<td>NOT_SUPPORTED</td>
<td>不支持事务，在无事务状态下运行,如果当前存在已有事务,则挂起当前事务</td>
</tr>
<tr>
<td>MANDATORY</td>
<td>必须有事务，否则抛异常</td>
</tr>
<tr>
<td>NEVER</td>
<td>必须没事务，否则抛异常</td>
</tr>
<tr>
<td>…</td>
<td></td>
</tr>
</tbody></table>
<blockquote>
<p>对于这些事务传播行为，我们只需要关注以下两个就可以了：</p>
<ol>
<li>REQUIRED（默认值）</li>
<li>REQUIRES_NEW</li>
</ol>
</blockquote>
<h3 id="AOP：面相切面编程"><a href="#AOP：面相切面编程" class="headerlink" title="AOP：面相切面编程"></a>AOP：面相切面编程</h3><p>AOP：Aspect Oriented Programming 就是面向特定方法的编程</p>
<p> 而AOP面向方法编程，就可以做到在不改动这些原始方法的基础上，针对特定的方法进行功能的增强。</p>
<blockquote>
<p>AOP的作用：在程序运行期间在不修改源代码的基础上对已有方法进行增强（无侵入性: 解耦）</p>
</blockquote>
<p>比如：我们只想通过 部门管理的 list 方法的执行耗时，那就只有这一个方法是原始业务方法。  而如果，我们是先想统计所有部门管理的业务方法执行耗时，那此时，所有的部门管理的业务方法都是 原始业务方法。 <strong>那面向这样的指定的一个或多个方法进行编程，我们就称之为 面向切面编程。</strong></p>
<p>AOP面向切面编程和OOP面向对象编程一样，它们都仅仅是一种编程思想，而动态代理技术是这种思想最主流的实现方式。而Spring的AOP是Spring框架的高级技术，旨在管理bean对象的过程中底层使用动态代理机制，对特定的方法进行编程(功能增强)。</p>
<p>优势：减少重复代码。提高开发效率，维护方便</p>
<h4 id="AOP的快速入门："><a href="#AOP的快速入门：" class="headerlink" title="AOP的快速入门："></a>AOP的快速入门：</h4><p>1.导入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.编写AOP入门程序：根据特定方法根据业务需要编程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//当前类为切面类</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TimeAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span> </span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">recordTime</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//记录方法执行开始时间</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//执行原始方法</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//记录方法执行结束时间</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//计算方法执行耗时</span></span><br><span class="line">        log.info(pjp.getSignature()+<span class="string">&quot;执行耗时: &#123;&#125;毫秒&quot;</span>,end-begin);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>AOP的功能：记录操作日志，权限控制，事务管理</p>
<p>优势：代码无侵入，减少了重复代码，提高开发效率，维护方便</p>
<h3 id="AOP的核心概念："><a href="#AOP的核心概念：" class="headerlink" title="AOP的核心概念："></a>AOP的核心概念：</h3><p>1.连接点：JoinPiont，可以被AOP控制的方法</p>
<p>2.通知：Advice，指哪儿些重复方法，也就是共性功能（最终体现为一个方法），</p>
<p>3.切入点：PointCut，匹配连接点的条件，通知仅会在切入点方法执行时被应用</p>
<p>4.切面：Aspect，描述通知与切入点对应关系（通知+切入点），切面在的类，通常用切面类表示，被@Aspect注解标识的类</p>
<p>5.目标对象：Target，通知所应用的对象</p>
<p>Spring的AOP底层是基于动态代理的技术来实现的，也就是说，在程序运行的时候，会自动的基于动态代理技术为目标对象生成一个对应的代理对象，在代理对象中就会对目标对象中的原始方法的功能进行增强。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230112161821401.png" alt="image-20230112161821401"></p>
<h3 id="AOP进阶"><a href="#AOP进阶" class="headerlink" title="AOP进阶"></a>AOP进阶</h3><p>1.通知类型</p>
<p>Spring中AOP的通知类型：</p>
<ul>
<li>@Around：环绕通知，此注解标注的通知方法在目标方法前、后都被执行</li>
<li>@Before：前置通知，此注解标注的通知方法在目标方法前被执行</li>
<li>@After ：后置通知，此注解标注的通知方法在目标方法后被执行，无论是否有异常都会执行</li>
<li>@AfterReturning ： 返回后通知，此注解标注的通知方法在目标方法后被执行，有异常不会执行</li>
<li>@AfterThrowing ： 异常后通知，此注解标注的通知方法发生异常后执行</li>
</ul>
<p> 在使用通知时的注意事项：</p>
<ul>
<li>@Around环绕通知需要自己调用 ProceedingJoinPoint.proceed() 来让原始方法执行，其他通知不需要考虑目标方法执行</li>
<li>@Around环绕通知方法的返回值，必须指定为Object，来接收原始方法的返回值，否则原始方法执行完毕，是获取不到返回值的。</li>
</ul>
<p>怎么来解决这个切入点表达式重复的问题？ 答案就是：<strong>抽取</strong></p>
<p>Spring提供了@PointCut注解，该注解的作用是将公共的切入点表达式抽取出来，需要用到时引用该切入点表达式即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//切入点方法（公共的切入点表达式）</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//前置通知（引用切入点）</span></span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;before ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//环绕通知</span></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        log.info(<span class="string">&quot;around before ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//调用目标对象的原始方法执行</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> proceedingJoinPoint.proceed();</span><br><span class="line">        <span class="comment">//原始方法在执行时：发生异常</span></span><br><span class="line">        <span class="comment">//后续代码不在执行</span></span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;around after ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//后置通知</span></span><br><span class="line">    <span class="meta">@After(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//返回后通知（程序在正常执行的情况下，会执行的后置通知）</span></span><br><span class="line">    <span class="meta">@AfterReturning(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;afterReturning ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//异常通知（程序在出现异常的情况下，执行的后置通知）</span></span><br><span class="line">    <span class="meta">@AfterThrowing(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;afterThrowing ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>需要注意的是：当切入点方法使用private修饰时，仅能在当前切面类中引用该表达式， 当外部其他切面类中也要引用当前类中的切入点表达式，就需要把private改为public，而在引用的时候，具体的语法为：</p>
<p>全类名.方法名()，具体形式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect2</span> &#123;</span><br><span class="line">    <span class="comment">//引用MyAspect1切面类中的切入点表达式</span></span><br><span class="line">    <span class="meta">@Before(&quot;com.itheima.aspect.MyAspect1.pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect2 -&gt; before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过以上程序运行可以看出在不同切面类中，默认按照切面类的类名字母排序：</p>
<ul>
<li>目标方法前的通知方法：字母排名靠前的先执行</li>
<li>目标方法后的通知方法：字母排名靠前的后执行</li>
</ul>
<p>如果我们想控制通知的执行顺序有两种方式：</p>
<ol>
<li>修改切面类的类名（这种方式非常繁琐、而且不便管理）</li>
<li>使用Spring提供的@Order注解</li>
</ol>
<p>使用@Order注解，控制通知的执行顺序：</p>
<p>通知的执行顺序大家主要知道两点即可：</p>
<ol>
<li>不同的切面类当中，默认情况下通知的执行顺序是与切面类的类名字母排序是有关系的</li>
<li>可以在切面类上面加上@Order注解，来控制不同的切面类通知的执行顺序</li>
</ol>
<h4 id="3-切入点表达式"><a href="#3-切入点表达式" class="headerlink" title="3.切入点表达式"></a>3.切入点表达式</h4><p>切入点表达式：</p>
<ul>
<li><p>描述切入点方法的一种表达式</p>
</li>
<li><p>作用：主要用来决定项目中的哪些方法需要加入通知</p>
</li>
<li><p>常见形式：</p>
<ol>
<li>execution(……)：根据方法的签名来匹配</li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20230110214150215.png" alt="image-20230110214150215">

<ol start="2">
<li>@annotation(……) ：根据注解匹配</li>
</ol>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240311215753015.png" alt="image-20240311215753015"></p>
<p>excution:主要根据方法的返回值，包名，类名，方法参数，等信息来匹配，语法为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Around(&quot;excution(访问修饰符 ? 返回值 包名.类名.?方法名称(方法参数) throws 异常?)&quot;)</span></span><br></pre></td></tr></table></figure>

<p>其中带<code>?</code>的表示可以省略的部分</p>
<ul>
<li><p>访问修饰符：可省略（比如: public、protected）</p>
</li>
<li><p>包名.类名： 可省略</p>
</li>
<li><p>throws 异常：可省略（注意是方法上声明抛出的异常，不是实际抛出的异常）</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;execution(void com.itheima.service.impl.DeptServiceImpl.delete(java.lang.Integer))&quot;)</span></span><br></pre></td></tr></table></figure>



<p>可以使用通配符描述切入点</p>
<ul>
<li><p><code>*</code> ：单个独立的任意符号，可以通配任意返回值、包名、类名、方法名、任意类型的一个参数，也可以通配包、类、方法名的一部分</p>
</li>
<li><p><code>..</code> ：多个连续的任意符号，可以通配任意层级的包，或任意类型、任意个数的参数</p>
</li>
</ul>
<p>切入点表达式的语法规则：</p>
<ol>
<li>方法的访问修饰符可以省略</li>
<li>返回值可以使用<code>*</code>号代替（任意返回值类型）</li>
<li>包名可以使用<code>*</code>号代替，代表任意包（一层包使用一个<code>*</code>）</li>
<li>使用<code>..</code>配置包名，标识此包以及此包下的所有子包</li>
<li>类名可以使用<code>*</code>号代替，标识任意类</li>
<li>方法名可以使用<code>*</code>号代替，表示任意方法</li>
<li>可以使用 <code>*</code>  配置参数，一个任意类型的参数</li>
<li>可以使用<code>..</code> 配置参数，任意个任意类型的参数</li>
</ol>
<p><strong>切入点表达式示例</strong></p>
<ul>
<li><p>省略方法的修饰符号 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(<span class="keyword">void</span> com.itheima.service.impl.DeptServiceImpl.delete(java.lang.Integer))</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>*</code>代替返回值类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com.itheima.service.impl.DeptServiceImpl.delete(java.lang.Integer))</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>*</code>代替包名（一层包使用一个<code>*</code>）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com.itheima.*.*.DeptServiceImpl.delete(java.lang.Integer))</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>..</code>省略包名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com..DeptServiceImpl.delete(java.lang.Integer))    </span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>*</code>代替类名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com..*.delete(java.lang.Integer))   </span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>*</code>代替方法名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com..*.*(java.lang.Integer))   </span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 <code>*</code> 代替参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com.itheima.service.impl.DeptServiceImpl.delete(*))</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>..</code>省略参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* com..*.*(..))</span><br></pre></td></tr></table></figure>

<h4 id="annotation"><a href="#annotation" class="headerlink" title="@annotation"></a>@annotation</h4><p>  要匹配多个无规则的方法，比如list和delete方法，基于excution这种切入表达式描述起来就很不方便，将两个切入点表达式组合在一起，是比较繁琐的</p>
<p>  实现步骤：</p>
<p>  1.编写自定义注解</p>
<p>  2.在业务类要作为连接点的方法上添加自定义注解</p>
</li>
</ul>
<p>自定义注解类：MyLog</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyLog &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>切面类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect6</span> &#123;</span><br><span class="line">    <span class="comment">//针对list方法、delete方法进行前置通知和后置通知</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//前置通知</span></span><br><span class="line">    <span class="meta">@Before(&quot;@annotation(com.itheima.anno.MyLog)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect6 -&gt; before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//后置通知</span></span><br><span class="line">    <span class="meta">@After(&quot;@annotation(com.itheima.anno.MyLog)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect6 -&gt; after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>业务类：DeptServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@MyLog</span>  <span class="comment">//自定义注解（表示：当前方法属于目标方法）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">    <span class="comment">//1. 删除部门</span></span><br><span class="line">    deptMapper.delete(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样就能在调用delete方法的时候，匹配当前定义的注解，执行前置通知和后置通知了</p>
<p>总结：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- execution切入点表达式</span><br><span class="line">  - 根据我们所指定的方法的描述信息来匹配切入点方法，这种方式也是最为常用的一种方式</span><br><span class="line">  - 如果我们要匹配的切入点方法的方法名不规则，或者有一些比较特殊的需求，通过execution切入点表达式描述比较繁琐</span><br><span class="line">- annotation 切入点表达式</span><br><span class="line">  - 基于注解的方式来匹配切入点方法。这种方式虽然多一步操作，我们需要自定义一个注解，但是相对来比较灵活。我们需要匹配哪个方法，就在方法上加上对应的注解就可以了</span><br></pre></td></tr></table></figure>

<h3 id="3-4连接点"><a href="#3-4连接点" class="headerlink" title="3.4连接点"></a>3.4连接点</h3><p>连接点：简单来说就是可以被AOP控制的方法</p>
<p>在spring中用JoinPoint抽象了连接点，用它可以获得方法执行的先关信息，比如方法的类名，方法名称， 方法参数等等</p>
<p>1.对于@Around通知，获取连接点的信息只能使用ProceedingJoinPoint类型</p>
<p>2.对于其他四种，after before AfterReturnning AfterThrowing </p>
<p>获取连接点的信息只能用JointPoint，它是ProceedingJoinPoint的父类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//环绕通知</span></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//获取目标类名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> pjp.getTarget().getClass().getName();</span><br><span class="line">        log.info(<span class="string">&quot;目标类名：&#123;&#125;&quot;</span>,name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//目标方法名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> pjp.getSignature().getName();</span><br><span class="line">        log.info(<span class="string">&quot;目标方法名：&#123;&#125;&quot;</span>,methodName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取方法执行时需要的参数</span></span><br><span class="line">        Object[] args = pjp.getArgs();</span><br><span class="line">        log.info(<span class="string">&quot;目标方法参数：&#123;&#125;&quot;</span>, Arrays.toString(args));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//执行原始方法</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">returnValue</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> returnValue;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240312213621023.png" alt="image-20240312213621023"></p>
<p>AOP 案例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">需求：将案例中增、删、改相关接口的操作日志记录到数据库表中</span><br><span class="line"></span><br><span class="line">- 就是当访问部门管理和员工管理当中的增、删、改相关功能接口时，需要详细的操作日志，并保存在数据表中，便于后期数据追踪。</span><br><span class="line"></span><br><span class="line">操作日志信息包含：</span><br><span class="line"></span><br><span class="line">- 操作人、操作时间、执行方法的全类名、执行方法名、方法运行时参数、返回值、方法执行时长</span><br><span class="line"></span><br><span class="line">&gt; 所记录的日志信息包括当前接口的操作人是谁操作的，什么时间点操作的，以及访问的是哪个类当中的哪个方法，在访问这个方法的时候传入进来的参数是什么，访问这个方法最终拿到的返回值是什么，以及整个接口方法的运行时长是多长时间。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">实现具体思路</span><br><span class="line"><span class="number">1.</span>数据库建表，包含需要操作的日志段，id，操作人ID，操作时间，方法，参数，返回值，耗时等</span><br><span class="line"><span class="number">2.</span>创建表对应的实体类，操作日志实体类</span><br><span class="line"><span class="number">3.</span>创建mapper接口，定义Insert()方法，使用<span class="meta">@Insert</span>的MySQL注解，写好SQL的插入语句</span><br><span class="line"><span class="number">4.</span>需要记录日志，将横向的关注点从业务的核心业务逻辑中分离出来，就需要AOP面向切面编程，因为只是记录增删改的日志，使用execution的表达式繁琐，所以使用<span class="meta">@annotation</span>的注解的切入点表达式</span><br><span class="line"><span class="number">5.</span>自定义注解类<span class="meta">@Log</span>，</span><br><span class="line">    <span class="meta">@Target(ElementType.METHOD)</span><span class="comment">//当前注解作用在方法上</span></span><br><span class="line">	<span class="meta">@Retention(RetentionPolicy.RUNTIME)</span><span class="comment">//表示是运行时注解</span></span><br><span class="line"><span class="number">6.</span>自定义切面类，使用切面表达式将之前的注解类引用进来</span><br><span class="line">    <span class="meta">@Around(&quot;@annotation(com.itheima.anno.Log)&quot;)</span></span><br><span class="line">    表示：拦截标注了Log的注解的方法，并且在方法执行前后进行环绕通知</span><br><span class="line"><span class="number">7.</span>在切面类中，通过连接点JoinPoint获取相关记录日志的参数，再调用Mapper接口中的Insert方法，将日志数据插入到数据库中</span><br></pre></td></tr></table></figure>

<h3 id="Springboot原理"><a href="#Springboot原理" class="headerlink" title="Springboot原理"></a>Springboot原理</h3><h4 id="1-配置文件的优先级"><a href="#1-配置文件的优先级" class="headerlink" title="1.配置文件的优先级"></a>1.配置文件的优先级</h4><p>在SpringBoot项目当中，常见的属性配置方式有5种， 3种配置文件，加上2种外部属性的配置(Java系统属性、命令行参数)。通过以上的测试，我们也得出了优先级(从低到高)：</p>
<ul>
<li>application.yaml（忽略）</li>
<li>application.yml</li>
<li>application.properties</li>
<li>java系统属性（-Dxxx&#x3D;xxx）</li>
<li>命令行参数（–xxx&#x3D;xxx）</li>
</ul>
<h4 id="2-Bean管理"><a href="#2-Bean管理" class="headerlink" title="2.Bean管理"></a>2.Bean管理</h4><p>前面讲过，通过Spring当中提供的注解@Component以及它的三个衍生注解（@Controller@Service@Repository）来声明IOC容器中的bean对象，同时我们也学习了如何为应用程序注入运行时所需要的依赖的bean对象，也就是依赖注入DI</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">总的来说，@Repository 注解用于标识数据访问层的组件，而 @Mapper 注解用于标识 MyBatis 的映射接口。</span><br></pre></td></tr></table></figure>

<p>1.如何总IOC容器中拿到bean对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 根据name获取bean</span><br><span class="line"></span><br><span class="line">   Object <span class="title function_">getBean</span><span class="params">(String name)</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 根据类型获取bean</span><br><span class="line"></span><br><span class="line">   &lt;T&gt; T <span class="title function_">getBean</span><span class="params">(Class&lt;T&gt; requiredType)</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 根据name获取bean（带类型转换）</span><br><span class="line"></span><br><span class="line">   &lt;T&gt; T <span class="title function_">getBean</span><span class="params">(String name, Class&lt;T&gt; requiredType)</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.bean对象的作用域配置</p>
<p>前面提到的IOC容器中，默认的bean对象是单列模式（只有一个实例对象）那么如何设置bean对象为非单列呢？需要设置bean的作用域</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在Spring中支持五种作用域，后三种在web环境才生效：</span><br><span class="line"></span><br><span class="line">| **作用域**  | **说明**                                        |</span><br><span class="line">| ----------- | ----------------------------------------------- |</span><br><span class="line">| singleton   | 容器内同名称的bean只有一个实例（单例）（默认）  |</span><br><span class="line">| prototype   | 每次使用该bean时会创建新的实例（非单例）        |</span><br><span class="line">| request     | 每个请求范围内会创建新的实例（web环境中，了解） |</span><br><span class="line">| session     | 每个会话范围内会创建新的实例（web环境中，了解） |</span><br><span class="line">| application | 每个应用范围内会创建新的实例（web环境中，了解） |</span><br></pre></td></tr></table></figure>

<p>如何设置一个bean的作用域呢？借助@Scope注解来进行配置作用域</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240314104531033.png" alt="image-20240314104531033"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//默认bean的作用域为：singleton (单例)</span><br><span class="line">@Lazy //延迟加载（第一次使用bean对象时，才会创建bean对象并交给ioc容器管理）</span><br><span class="line"></span><br><span class="line">@Scope(&quot;prototype&quot;) //bean作用域为非单例</span><br></pre></td></tr></table></figure>

<p>3.管理第三方的bean对象</p>
<p>之前我们所配置的bean，像controller、service，dao三层体系下编写的类，这些类都是我们在项目当中自己定义的类(自定义类)。当我们要声明这些bean，也非常简单，我们只需要在类上加上@Component以及它的这三个衍生注解。</p>
<p>如果这个类不是我们自己编写的，而是第三方提供的，那么如何使用和定义第三方的bean？：使用@Bean注解</p>
<p>解决方案一：在启动类上添加@Bean标识的方法 &#x2F;&#x2F;保持启动类的干净，不推荐使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明第三方bean</span></span><br><span class="line"><span class="meta">@Bean</span> <span class="comment">//将当前方法的返回值对象交给IOC容器管理, 成为IOC容器bean</span></span><br><span class="line"><span class="keyword">public</span> SAXReader <span class="title function_">saxReader</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解决方案二：在配置类中定义@Bean标识的方法</p>
<p>如果需要第三方定义的Bean时候，通常会单独定义一个配置类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//配置类  (在配置类当中对第三方bean进行集中的配置管理)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommonConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//声明第三方bean</span></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//将当前方法的返回值对象交给IOC容器管理, 成为IOC容器bean</span></span><br><span class="line">          <span class="comment">//通过@Bean注解的name/value属性指定bean名称, 如果未指定, 默认是方法名</span></span><br><span class="line">    <span class="keyword">public</span> SAXReader <span class="title function_">reader</span><span class="params">(DeptService deptService)</span>&#123;</span><br><span class="line">        System.out.println(deptService);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在方法上添加一个@Bean注解，Spring容器在启动的时候，会自动的调用这个方法，并将方法的返回值声明为Spring容器当中的Bean对象</p>
<h3 id="3-Springboot原理"><a href="#3-Springboot原理" class="headerlink" title="3.Springboot原理"></a>3.Springboot原理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring 是一款轻量级的java开发框架，一般指的是spring framework,他是很多模块的集合，包括springboot快速启动，springcloud微服务，spring Data数据库等spring全家桶</span><br><span class="line"></span><br><span class="line">springboot就是帮助我们快速的构建应用程序，简化开发，提高效率</span><br></pre></td></tr></table></figure>

<p>Springboot之所以能简化Spring的开发，是因为SpringBoot底层提供了两个非常重要的功能，一个是起步依赖，一个是自动配置</p>
<p><strong>起步依赖：</strong></p>
<p>Springboot所提供的起步依赖，可以大大简化pom文件当中的依赖配置，从而解决了Spring框架中依赖配置繁琐的问题</p>
<p><strong>自动配置：</strong></p>
<p>通过自动配置功能就可以打打简化Spring框架在使用Bean的声明以及Bean的配置，我们只需要引入程序开发时候所需要的起步依赖，项目开发时所用到的常见配置都有了，我们直接使用就可以了</p>
<h4 id="3-1起步依赖："><a href="#3-1起步依赖：" class="headerlink" title="3.1起步依赖："></a>3.1起步依赖：</h4><p>假设没有使用SpringBoot，用的Spring框架进行Web开发，这时候我们需要引入相关依赖</p>
<p>Spring-webmvc依赖，Servlet依赖，aop依赖，JSON处理依赖，Tomcat依赖，还要保证依赖的版本匹配，避免出现版本冲突的问题</p>
<p>如果我们使用了SpringBoot，直接引用web开发的起步依赖，springboot-starter-web起步依赖即可，因为有<strong>Maven依赖传递</strong>，所需要的依赖就都有了</p>
<h4 id="3-2自动配置："><a href="#3-2自动配置：" class="headerlink" title="3.2自动配置："></a>3.2自动配置：</h4><p>概述：Springboot的自动配置，就是当Spring容器启动后，一些配置类，Bean对象就自动存储到了IOC容器中，不需要我们手动声明，从而简化了开发，省去了繁琐的配置操作</p>
<p>比如：我们要进行事务管理，要进行AOP切面开发，就不需要手动声明这些Bean对象了，直接注入就可以了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在IOC容器中，除了我们自己定义的Bean以外，还有很多配置类，这些配置类都是在SpringBoot启动的时候加载进来的配置类，这些配置类加载进来后，也会生成很多的Bean对象，我们并没有声明，却可以通过@Autowired自动注入Bean对象，</span><br></pre></td></tr></table></figure>

<p>解析自动配置的原理：分析在Springboot中，我们引入对应的依赖后，Springboot是如何将依赖jar包当中提供的Bean以及配置类直接加载到当前项目的springIOC容器当中的</p>
<p>我们先引入第三方的依赖，执行测试方法发现：在Spring容器中没有找到com.example.TokenParse类型的bean对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">思考：为什么引入的第三方依赖当中的Bean以及配置类，没有生效</span><br><span class="line">1.在类上添加@Component注解来声明Bean对象时候，还要保证Bean对象能被Spring的组件扫描到</span><br><span class="line">2.SpringBoot项目中的@SpringBootApplication注解，具有扫描包的作用，但是只会扫描启动类所在的当前的包，以及其子包</span><br><span class="line">3.没在一个包下，所以扫描不到</span><br></pre></td></tr></table></figure>

<p>解决方法：</p>
<p>1.@Component组件扫描、、繁琐不推荐</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.itheima&quot;,&quot;com.example&quot;&#125;)</span> <span class="comment">//指定要扫描的包</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringbootWebConfig2Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringbootWebConfig2Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.@import导入（使用@import导入的类会被Spring加载到IOC容器当中去）</p>
<p>导入形式主要有以下几种：</p>
<ol>
<li>导入普通类</li>
<li>导入配置类</li>
<li>导入ImportSelector接口实现类</li>
</ol>
<p>不推荐，我们不知道第三方具体类，导入繁琐</p>
<p>​	4.使用第三方提供的@EnableXxxxx注解（推荐），第三方打包好的</p>
<p>只需要在启动类上加上@EnableXxxxx注解即可</p>
<h3 id="3-3原理分析：源码跟踪"><a href="#3-3原理分析：源码跟踪" class="headerlink" title="3.3原理分析：源码跟踪"></a>3.3原理分析：源码跟踪</h3><p>SpringBoot启动类的核心注解，@SpringBootApplication开始分析</p>
<p>在@SpringBootApplication包含了注解如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">四个元注解：</span><br><span class="line">@Retention():表示注解生效的地方，取值如下是</span><br><span class="line">	RetentionPolicy.SOURCE：注解仅存在于源代码中，编译时会被忽略。</span><br><span class="line">	RetentionPolicy.CLASS：注解存在于类文件中，但在运行时不可见，这是默认值。</span><br><span class="line">	RetentionPolicy.RUNTIME：注解存在于类文件中，并在运行时可见，可以通过反射机制读取。</span><br><span class="line">	</span><br><span class="line">@Target():表示注解可以修饰的目标元素的范围：取值如下</span><br><span class="line">	ElementType.TYPE：可以修饰类、接口、枚举等。</span><br><span class="line">	ElementType.FIELD：可以修饰字段、成员变量。</span><br><span class="line">	ElementType.METHOD：可以修饰方法。</span><br><span class="line">	ElementType.PARAMETER：可以修饰方法的参数。</span><br><span class="line">	ElementType.CONSTRUCTOR：可以修饰构造方法。</span><br><span class="line">	ElementType.LOCAL_VARIABLE：可以修饰局部变量。</span><br><span class="line">	ElementType.ANNOTATION_TYPE：可以修饰注解类型。</span><br><span class="line">	ElementType.PACKAGE：可以修饰包。</span><br><span class="line">	</span><br><span class="line">@Documented：表示注解将会被标注在Javadoc文档中</span><br><span class="line">@Inherited:表示注解具有继承性</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240315101257039.png" alt="image-20240315101257039"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">在@SpringBootApplication注解中包含了：</span><br><span class="line"></span><br><span class="line">- 元注解（不再解释）</span><br><span class="line">- @SpringBootConfiguration：表示SpringBoot启动类是一个配置类</span><br><span class="line">- @EnableAutoConfiguration：</span><br><span class="line">- @ComponentScan：用来进行组件扫描的，扫描范围为启动类所在的包以及其子包下所有被Component及其衍生注解声明的类</span><br><span class="line"></span><br><span class="line">主要的是@EnableAutoConfiguration注解(自动配置核心注解)：</span><br><span class="line">此注解下有两个注解：</span><br><span class="line">@AutoConfigurationPackage</span><br><span class="line">@Import(AutoConfigurationImportSelector.class)：导入接口实现类</span><br><span class="line">public @interface EnableAutoConfiguration &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240315101525188.png" alt="image-20240315101525188"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">使用@Import注解，导入了实现ImportSelector接口的实现类。</span><br><span class="line">AutoConfigurationImportSelector类是ImportSelector接口的实现类。</span><br><span class="line">AutoConfigurationImportSelector类中重写了ImportSelector接口的selectImports()方法：</span><br><span class="line">selectImports()方法底层调用getAutoConfigurationEntry()方法，获取可自动配置的配置类信息集合</span><br><span class="line">getAutoConfigurationEntry()方法通过调用getCandidateConfigurations(annotationMetadata, attributes)方法获取在配置文件中配置的所有自动配置类的集合</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240315101059913.png" alt="image-20240315101059913"></p>
<p>在起步依赖中打开配置文件的所在位置</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240315101935391.png" alt="image-20240315101935391"></p>
<p>在测试类的时候，我们直接在测试类中，注入了一个叫gson的Bean对象，用来进行JSON格式转换，虽然我们没有配置对象，但是我们可以直接注入使用，原因就是在SpringBoot在启动时在自动配置类实现了自动配置，我们双击shift进入这个类的源码，</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240315102606421.png" alt="image-20240315102606421"></p>
<p>@AutoConfiguration底层就封装了@Configuration注解，表示该类是一个配置类</p>
<p><code>@Configuration</code>注解的类可以使用<code>@Bean</code>注解来声明Bean，Spring容器会根据这些Bean的定义来创建和管理Bean实例，调用配置类中的@Bean标识的方法，并且把方法的返回值注册到IOC容器中去。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">文件中定义的配置类非常多，而且每个配置类中又可以定义很多的bean，那这些bean都会注册到Spring的IOC容器中吗？</span><br><span class="line"></span><br><span class="line">答案：并不是。 在声明bean对象时，上面有加一个以@Conditional开头的注解，这种注解的作用就是按照条件进行装配，只有满足条件之后，才会将bean注册到Spring的IOC容器中（下面会详细来讲解）</span><br></pre></td></tr></table></figure>

<p>@Conditional注解</p>
<p>作用：按照一定的条件进行判断，满足相应的条件后，才会注册对应的Bean对象到Spring的IOC容器中</p>
<p>Conditional 是一个父注解，会派生出大量的子注解：</p>
<ul>
<li><code>@ConditionalOnBean</code>：当容器里有指定 Bean 的条件下</li>
<li><code>@ConditionalOnMissingBean</code>：当容器里没有指定 Bean 的情况下</li>
<li><code>@ConditionalOnSingleCandidate</code>：当指定 Bean 在容器中只有一个，或者虽然有多个但是指定首选 Bean</li>
<li><code>@ConditionalOnClass</code>：当类路径下有指定类的条件下</li>
<li><code>@ConditionalOnMissingClass</code>：当类路径下没有指定类的条件下</li>
<li><code>@ConditionalOnProperty</code>：指定的属性是否有指定的值</li>
<li><code>@ConditionalOnResource</code>：类路径是否有指定的值</li>
<li><code>@ConditionalOnExpression</code>：基于 SpEL 表达式作为判断条件</li>
<li><code>@ConditionalOnJava</code>：基于 Java 版本作为判断条件</li>
<li><code>@ConditionalOnJndi</code>：在 JNDI 存在的条件下差在指定的位置</li>
<li><code>@ConditionalOnNotWebApplication</code>：当前项目不是 Web 项目的条件下</li>
<li><code>@ConditionalOnWebApplication</code>：当前项目是 Web 项 目的条件下</li>
</ul>
<hr>
<p>主要用的有三个：</p>
<ul>
<li>@ConditionalOnClass：判断环境中有对应字节码文件，才注册bean到IOC容器。</li>
<li>@ConditionalOnMissingBean：判断环境中没有对应的bean(类型或名称)，才注册bean到IOC容器。</li>
<li>@ConditionalOnProperty：判断配置文件中有对应属性和值，才注册bean到IOC容器。</li>
</ul>
<p>底层的自动配置原理总结：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">简单来说就是：SpringBoot 定义了一套接口规范，这套规范规定：SpringBoot 在启动时会扫描外部引用 jar 包中的META-INF/spring.factories文件，将文件中配置的类型信息加载到 Spring 容器（此处涉及到 JVM 类加载机制与 Spring 的容器知识），并执行类中定义的各种操作。对于外部 jar 来说，只需要按照 SpringBoot 定义的标准，就能将自己的功能装置进 SpringBoot。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">详细来说：自动配置的核心就在Spring启动类@SpringBootApplication的注解上，底层包含了</span><br><span class="line">@EnableAutoConfiguration，这个注解才是自动配置的核心</span><br><span class="line"></span><br><span class="line">它封装了一个@import注解，import注解里面制定了一个接口的实现类，在这个实现类中重写了selectImport()方法，而这个方法会去读取对应jar包地下的配置文件，这些配置文件源码都试用贴@Configuration标注，表示是Spring的配置类，方法使用@Bean和@Conditional修饰</span><br><span class="line">表示只要满足了Conditional的条件，才会将这个Bean对象交给IOC容器管理。</span><br></pre></td></tr></table></figure>

<h3 id="案例：自定义starter分析"><a href="#案例：自定义starter分析" class="headerlink" title="案例：自定义starter分析"></a>案例：自定义starter分析</h3><p>业务场景：</p>
<p>​	我们案例中使用的阿里云oss对象存储服务，阿里云并没有提供起步依赖，这时候用起来就比较繁琐，我们需要1.引入对应依赖 2.在配置文件中配置3.基于官方SDK来改造相应的工具类</p>
<p>​	这时候我们需要自定义一些公共组件，在这些公共组件中，提前把需要配置的Bean都配置好，到时候直接将对应组件的坐标引入进来，交给Spring自动配置，大大简化开发</p>
<p>需求：自定义起步依赖，完成对阿里云OSS操作工具类AliyunOSSUtils的自动配置</p>
<p>​			引入起步依赖后，要想使用阿里云OSS，注入AliyunOSSUtils直接使用即可</p>
<p>​	<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240315170105728.png" alt="image-20240315170105728"></p>
<p>在自定义一个起步依赖starter的时候，按照规范需要定义两个模块:</p>
<p>1.starter模块：进行依赖管理（程序开发过程所需要的依赖，都定义在starter起步依赖中）</p>
<p>2.autoconfigure模块：自动配置模块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">需求明确了，接下来我们再来分析一下具体的实现步骤：</span><br><span class="line"></span><br><span class="line">- 第1步：创建自定义starter模块（进行依赖管理）</span><br><span class="line">  - 把阿里云OSS所有的依赖统一管理起来</span><br><span class="line">- 第2步：创建autoconfigure模块</span><br><span class="line">  - 在starter中引入autoconfigure （我们使用时只需要引入starter起步依赖即可）</span><br><span class="line">- 第3步：在autoconfigure中完成自动配置</span><br><span class="line">  1. 定义一个自动配置类，在自动配置类中将所要配置的bean都提前配置好</span><br><span class="line">  2. 定义配置文件，把自动配置类的全类名定义在配置文件中</span><br><span class="line"></span><br><span class="line">我们分析完自定义阿里云OSS自动配置的操作步骤了，下面我们就按照分析的步骤来实现自定义starter。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">前两步骤好说，在autoconfiguration中配置好相关依赖，再在starter模块中引入autoconfiguration依赖即可</span><br><span class="line"></span><br><span class="line">我们要想引入起步依赖后直接注入AliOSSUtils，就需要定义一个自动配置类，并且自动以自动配置类的的配置文件</span><br><span class="line"></span><br><span class="line">主要难以理解的是，自动配置类怎么去写</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSAutoConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> AliOSSUtils <span class="title function_">aliOSSUtils</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AliOSSUtils</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//不带参数的配置类，声明Bean，因为需要注入AliOSSUtils，所以声明一个返回值为AliOSSUtils的函数，返回一个AliOSSUtils类型的对象，交给IOC容器管理</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//但我们声明这个对象是需要来给赋值的，AliOSSUtils中声明了private AliOSSProperties aliOSSProperties，来导入秘钥等配置，我们在声明的时候是需要给这个成员变量赋值的，</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableConfigurationProperties(AliOSSProperties.class)</span></span><br><span class="line"><span class="comment">//它告诉Spring Boot要将配置文件中的属性值绑定到AliOSSProperties类的实例中。</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSAutoConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//定义了一个名为aliOSSUtils的Bean，它的类型是AliOSSUtils，并且依赖于AliOSSProperties类的一个实例。</span></span><br><span class="line">    <span class="keyword">public</span> AliOSSUtils <span class="title function_">aliOSSUtils</span><span class="params">(AliOSSProperties aliOSSProperties)</span>&#123;</span><br><span class="line">        <span class="type">AliOSSUtils</span> <span class="variable">aliOSSUtils</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AliOSSUtils</span>();</span><br><span class="line">        aliOSSUtils.setAliOSSProperties(aliOSSProperties);</span><br><span class="line">        <span class="keyword">return</span> aliOSSUtils;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//AliOSSAutoConfiguration这个配置类要想被加载到，就需要在一份固定的配置文件中，Spring启动时，会自动加载该文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//org.springframework.boot.autoconfigure.AutoConfiguration.imports</span></span><br><span class="line"><span class="comment">//在此Imports文件中，声明需要被自动配置的类的全类名com.aliyun.oss.AliOSSAutoConfiguration，这样Spring在启动的时候，就会自动加载该配置文件中定义的所有配置类</span></span><br></pre></td></tr></table></figure>



<h2 id="web开发总结："><a href="#web开发总结：" class="headerlink" title="web开发总结："></a>web开发总结：</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240318210310671.png" alt="image-20240318210310671"></p>
<p>后端开发流程：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240318210652587.png" alt="image-20240318210652587"></p>
<p>我们在学习这些web后端开发技术的时候，我们都是基于主流的SpringBoot进行整合使用的。而SpringBoot又是用来简化开发，提高开发效率的。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240318210736030.png" alt="image-20240318210736030"></p>
<p>而Spring框架的web开发模块，我们也称为：SpringMVC</p>
<p>SpringMVC，SpringFramework，Mybatis俗称SSM</p>
<p>基于传统的SSM框架进行整合项目开发会比较繁琐，而且开发效率低，所以现在的企业开发当中，基本上都是基于SpringBoot整合SSM进行项目开发的</p>
<p>web后端开发内容完结撒花！</p>
<h1 id="Maven高级"><a href="#Maven高级" class="headerlink" title="Maven高级"></a>Maven高级</h1><p>Maven高级内容包括:</p>
<ul>
<li>分模块设计与开发</li>
<li>继承与聚合</li>
<li>私服</li>
</ul>
<h3 id="1-分模块设计与开发"><a href="#1-分模块设计与开发" class="headerlink" title="1.分模块设计与开发"></a>1.分模块设计与开发</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240318212929002.png" alt="image-20240318212929002"></p>
<p>而且分模块设计之后，如果我们需要用到另外一个模块的功能，我们直接依赖模块就可以了。比如商品模块、搜索模块、购物车订单模块都需要依赖于通用组件当中封装的一些工具类，我只需要引入通用组件的坐标就可以了。</p>
<p><strong>分模块设计就是将项目按照功能&#x2F;结构拆分成若干个子模块，方便项目的管理维护、拓展，也方便模块键的相互调用、资源共享。</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240318213039063.png" alt="image-20240318213039063"></p>
<p>方案一：直接依赖我们当前项目 tlias-web-management ，但是存在两大缺点：</p>
<ul>
<li>这个项目当中包含所有的业务功能代码，而想共享的资源，仅仅是pojo下的实体类，以及 utils 下的工具类。如果全部都依赖进来，项目在启动时将会把所有的类都加载进来，会<strong>影响性能</strong>。</li>
<li>如果直接把这个项目都依赖进来了，那也就意味着我们所有的业务代码都对外公开了，这个是非常<strong>不安全</strong>的。</li>
</ul>
<p>方案二：分模块设计</p>
<p>1.将pojo包下的实体类，抽取到一个Maven模块tlias-pojo</p>
<p>2.将utils包下的工具类，抽取到一个Maven模块中tlias-utils</p>
<p>3.在具体的工程文件中，直接引入对应的依赖即可</p>
<p><strong>注意：分模块开发需要先针对模块功能进行设计，再进行编码。不会先将工程开发完毕，然后进行拆分。</strong></p>
<h3 id="2-继承与聚合"><a href="#2-继承与聚合" class="headerlink" title="2.继承与聚合"></a>2.继承与聚合</h3><p>在案例项目分模块开发之后啊，我们会看到tlias-pojo、tlias-utils、tlias-web-management中都引入了一个依赖 lombok 的依赖。我们在三个模块中分别配置了一次。</p>
<p>功能虽然能实现，但是很繁琐</p>
<h4 id="2-1继承"><a href="#2-1继承" class="headerlink" title="2.1继承"></a>2.1继承</h4><p>我们可以再创建一个父工程 tlias-parent ，然后让上述的三个模块 tlias-pojo、tlias-utils、tlias-web-management 都来继承这个父工程 。 然后再将各个模块中都共有的依赖，都提取到父工程 tlias-parent中进行配置，只要子工程继承了父工程，依赖它也会继承下来，这样就无需在各个子工程中进行配置了。</p>
<p>Maven不支持多继承，但是支持多继承，与Java类似</p>
<p>所有的SpringBoot工程都有一个父工程，spring-boot-starter-parent。</p>
<p>我们为了将公共的依赖抽离出来，就可以自己创建一个父工程，保存公共的依赖，再由子工程去继承，如下图所示</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240318223702481.png" alt="image-20240318223702481"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tlias-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这里打包方式设置为pom，提及到Maven的打包方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Maven打包方式：</span><br><span class="line"></span><br><span class="line">- jar：普通模块打包，springboot项目基本都是jar包（内嵌tomcat运行）</span><br><span class="line">- war：普通web程序打包，需要部署在外部的tomcat服务器中运行</span><br><span class="line">- pom：父工程或聚合工程，该模块不写代码，仅进行依赖管理</span><br></pre></td></tr></table></figure>

<p>在子工程的pom文件中，配置继承关系</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tlias-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../tlias-parent/pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tlias-utils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">注意：relativePath指定父工程的pom文件的相对位置（如果不指定，将从本地仓库/远程仓库查找该工程）。</span><br><span class="line"></span><br><span class="line">-  ../ 代表的上一级目录</span><br></pre></td></tr></table></figure>

<h4 id="2-2版本锁定"><a href="#2-2版本锁定" class="headerlink" title="2.2版本锁定"></a>2.2版本锁定</h4><p>场景：如果项目中各个模块都公共的各部分依赖，我们可以定义在父工程中，从而简化子工程的配置，然而在项目开发中，还有一些模块，并不是各个模块共有的，有可能只有其中的一小部分模块使用到了这个依赖</p>
<p>问题：如果项目拆分的够多，每次更新版本，我们都找得到这个项目中的每一个模块，一个一个改，很容易出现问题，遗漏掉一个模块，忘记更换版本的情况。</p>
<p>这时候就需要Maven的版本锁定功能</p>
<p>父工程：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--统一管理依赖版本--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--JWT令牌--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>子工程：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--JWT令牌--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在Maven中，可以在父工程pom文件中，通过&lt;dependencyManagement&gt;来统一管理依赖版本</span><br><span class="line">1.在父工程中的&lt;dependencyManagement&gt;只能统一管理依赖版本，并不会直接将这个依赖引入进来，这点和&lt;dependencies&gt;是不同的</span><br><span class="line">2.子工程要使用这个依赖，还是要引入的，只是此时就无需指定&lt;version&gt;版本，由父工程统一管理，变更依赖版本，只需要在父工程中统一变更。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>属性配置</strong></p>
<p>我们也可以通过自定义属性以及属性的引用形式，在父工程中，将依赖的版本号进行集中管理和维护，具体的语法为：</p>
<p>1). 自定义属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.18.24<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>2). 引用属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们就可以在父工程中，将所有的版本号，都集中管理维护出来。</p>
<p><strong>面试题：<code>&lt;dependencyManagement&gt;</code> 与 <code>&lt;dependencies&gt;</code> 的区别是什么?</strong></p>
<ul>
<li><code>&lt;dependencies&gt;</code> 是直接依赖，在父工程配置了依赖，子工程会直接继承下来。 </li>
<li><code>&lt;dependencyManagement&gt;</code> 是统一管理依赖版本，不会直接依赖，还需要在子工程中引入所需依赖(无需指定版本)</li>
</ul>
<h4 id="2-3聚合"><a href="#2-3聚合" class="headerlink" title="2.3聚合"></a>2.3聚合</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240319160756422.png" alt="image-20240319160756422" style="zoom:50%;">

<p>分模块设计和开发之后，我们的项目被拆分了很多模块，比如如上图，我们在打包management的时候，需要将parent，pojo，utils分别执行install生命周期安装到Maven的本地仓库，在针对management模块执行package打包操作。就很繁琐</p>
<p>通过Maven聚合就能够实现项目的统一构建（清理，编译，测试，打包，安装等）</p>
<p><strong>聚合</strong>：将多个模块组织成一个整体</p>
<p><strong>聚合工程</strong>：一个不具有业务功能的空工程，有且只有一个pom文件，一般来讲，继承关系中的父工程和聚合工程是同一个</p>
<p><strong>作用</strong>：快速构建项目，无需根据依赖关系构建，直接在聚合工程上构建即可</p>
<p><strong>实现：</strong>在聚合工程中，通过<moudules>设置当前聚合工程所包含的字模块的名称，我们可以在parent（聚合工程）的pom文件中，添加如下配置</moudules></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--聚合其他模块--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>../tlias-pojo<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>../tlias-utils<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>../tlias-web-management<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--在module中添加聚合模块的名称   ../表示上一级目录--&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-继承与聚合对比"><a href="#2-3-继承与聚合对比" class="headerlink" title="2.3 继承与聚合对比"></a>2.3 继承与聚合对比</h3><ul>
<li><p><strong>作用</strong></p>
<ul>
<li><p>聚合用于快速构建项目</p>
</li>
<li><p>继承用于简化依赖配置、统一管理依赖</p>
</li>
</ul>
</li>
<li><p><strong>相同点：</strong></p>
<ul>
<li><p>聚合与继承的pom.xml文件打包方式均为pom，通常将两种关系制作到同一个pom文件中</p>
</li>
<li><p>聚合与继承均属于设计型模块，并无实际的模块内容</p>
</li>
</ul>
</li>
<li><p><strong>不同点：</strong></p>
<ul>
<li><p>聚合是在聚合工程中配置关系，聚合可以感知到参与聚合的模块有哪些</p>
</li>
<li><p>继承是在子模块中配置关系，父模块无法感知哪些子模块继承了自己</p>
</li>
</ul>
</li>
</ul>
<h2 id="3-私服"><a href="#3-私服" class="headerlink" title="3.私服"></a>3.私服</h2><p>本地搭建私服，供不同的电脑去访问和上传相应的依赖jar包</p>
<p><strong>私服：</strong>是一中特殊的远程仓库，架设在局域网内的仓库服务，用来代理与外部的中央仓库，用于解决团队内部资源共享与资源同步问题</p>
<p><strong>依赖查找顺序</strong>：本地仓库，私服仓库，中央仓库</p>
<p><strong>资料的上传与下载</strong>：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/Javaweb/image-20240319173844509.png" alt="image-20240319173844509"></p>
<p>资源上传与下载，我们需要做三步配置，执行一条指令。</p>
<p>第一步配置：在maven的配置文件中配置访问私服的用户名、密码。</p>
<p>第二步配置：在maven的配置文件中配置连接私服的地址(url地址)。</p>
<p>第三步配置：在项目的pom.xml文件中配置上传资源的位置(url地址)。</p>
<p>配置好了上述三步之后，要上传资源到私服仓库，就执行执行maven生命周期：deploy。</p>
<blockquote>
<p>私服仓库说明：</p>
<ul>
<li>RELEASE：存储自己开发的RELEASE发布版本的资源。</li>
<li>SNAPSHOT：存储自己开发的SNAPSHOT发布版本的资源。</li>
<li>Central：存储的是从中央仓库下载下来的依赖。</li>
</ul>
</blockquote>
<blockquote>
<p>项目版本说明：</p>
<ul>
<li>RELEASE(发布版本)：功能趋于稳定、当前更新停止，可以用于发行的版本，存储在私服中的RELEASE仓库中。</li>
<li>SNAPSHOT(快照版本)：功能不稳定、尚处于开发中的版本，即快照版本，存储在私服的SNAPSHOT仓库中。</li>
</ul>
</blockquote>
<p><strong>具体操作：</strong></p>
<p><strong>1.设置私服的访问用户名、密码</strong>：在Maven安装目录下conf&#x2F;settings.xml中的servers中配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">password</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">password</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2.设置私服依赖下载的仓库组地址（在自己maven安装目录下的conf&#x2F;settings.xml中的mirrors、profiles中配置）</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-public<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.150.101:8081/repository/maven-public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>allow-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-public<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.150.101:8081/repository/maven-public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">            	<span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            	<span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>3.IDEA的maven工程的pom文件中配置上传（发布）地址(直接在tlias-parent中配置发布地址)</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- release版本的发布地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.150.101:8081/repository/maven-releases/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- snapshot版本的发布地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.150.101:8081/repository/maven-snapshots/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>配置完成之后，我们就可以在tlias-parent中执行<strong>deploy</strong>生命周期，将项目发布到私服仓库中。 </p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://www.mfyuan.top">方圆</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://www.mfyuan.top/2024/03/25/Java/JavaWeb/">http://www.mfyuan.top/2024/03/25/Java/JavaWeb/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.mfyuan.top" target="_blank">方圆的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/">java</a><a class="post-meta__tags" href="/tags/Web/">Web</a></div><div class="post_share"><div class="social-share" data-image="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_10.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/03/26/hello-world/" title="Hello World"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_25.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Hello World</div></div></a></div><div class="next-post pull-right"><a href="/2024/03/25/leetcode/hash/" title="刷Leecode笔记（三）哈希表篇"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_10.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">刷Leecode笔记（三）哈希表篇</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/04/07/Java/Docker/" title="Docker"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_30.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-07</div><div class="title">Docker</div></div></a></div><div><a href="/2024/05/07/Java/Java8%E6%96%B0%E7%89%B9%E6%80%A7/" title="java8新特性"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_25.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-07</div><div class="title">java8新特性</div></div></a></div><div><a href="/2024/04/15/Java/RabbitMQ/" title="RabbitMq"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_18.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-15</div><div class="title">RabbitMq</div></div></a></div><div><a href="/2024/04/04/Java/java%E9%9B%86%E5%90%88/" title="Java集合常用方法"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_29.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-04</div><div class="title">Java集合常用方法</div></div></a></div><div><a href="/2024/04/02/Java/mybatisplus/" title="MybatisPlus（持续更新）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_8.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-02</div><div class="title">MybatisPlus（持续更新）</div></div></a></div><div><a href="/2024/04/05/Java/Java%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/" title="Java基础篇"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_18.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-05</div><div class="title">Java基础篇</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/touxiang.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">方圆</div><div class="author-info__description">总要在互联网上留下点记忆吧</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">32</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">35</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/fyfyfy233"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/fyfyfy233" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://image.mfyuan.top/img/QQ.jpg" target="_blank" title="QQ"><i class="fab fa-qq" style="color: #24292e;"></i></a><a class="social-icon" href="https://image.mfyuan.top/img/WeChat.png" target="_blank" title="微信"><i class="fab fa-weixin" style="color: #24292e;"></i></a><a class="social-icon" href="https://space.bilibili.com/232780690" target="_blank" title="bilibili"><i class="fab fa-bilibili" style="color: #24292e;"></i></a><a class="social-icon" href="https://leetcode.cn/u/yin-ni-er-qi-de-yi-hong-xi-bei" target="_blank" title="leecode"><i class="fab fa-leanpub" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div id="welcome-info"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaWeb%E5%BC%80%E5%8F%91"><span class="toc-number">1.</span> <span class="toc-text">JavaWeb开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E8%AF%86web%E5%89%8D%E7%AB%AF"><span class="toc-number">1.0.1.</span> <span class="toc-text">初识web前端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue%E6%A6%82%E8%BF%B0"><span class="toc-number">1.0.2.</span> <span class="toc-text">Vue概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%9A"><span class="toc-number">1.0.2.1.</span> <span class="toc-text">Vue生命周期：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Ajax%EF%BC%9A"><span class="toc-number">1.0.2.2.</span> <span class="toc-text">Ajax：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Axios%EF%BC%9A"><span class="toc-number">1.0.2.3.</span> <span class="toc-text">Axios：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#YApi"><span class="toc-number">1.0.2.4.</span> <span class="toc-text">YApi:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Vue%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-number">1.0.2.5.</span> <span class="toc-text">Vue组件库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginx%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.0.2.6.</span> <span class="toc-text">Nginx服务器</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Maven"><span class="toc-number">2.</span> <span class="toc-text">Maven</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.</span> <span class="toc-text">Maven简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web%E5%88%86%E6%9E%90"><span class="toc-number">2.2.</span> <span class="toc-text">web分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.3.</span> <span class="toc-text">HTTP协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-%E8%AF%B7%E6%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%9A"><span class="toc-number">2.4.</span> <span class="toc-text">HTTP-请求协议：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-%E5%93%8D%E5%BA%94%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.5.</span> <span class="toc-text">HTTP-响应协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-%E5%8D%8F%E8%AE%AE%E8%A7%A3%E6%9E%90-Tomcat"><span class="toc-number">2.6.</span> <span class="toc-text">HTTP-协议解析-Tomcat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.7.</span> <span class="toc-text">服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.7.1.</span> <span class="toc-text">Web服务器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#spring"><span class="toc-number">3.</span> <span class="toc-text">spring</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#springboot%E5%85%A5%E9%97%A8%E7%A8%8B%E5%BA%8F%E8%A7%A3%E6%9E%90"><span class="toc-number">3.1.</span> <span class="toc-text">springboot入门程序解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBootWeb%E7%9A%84%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94"><span class="toc-number">3.2.</span> <span class="toc-text">SpringBootWeb的请求响应</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet"><span class="toc-number">3.3.</span> <span class="toc-text">Servlet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%EF%BC%9APostman"><span class="toc-number">3.4.</span> <span class="toc-text">请求：Postman</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%8F%82%E6%95%B0"><span class="toc-number">3.4.1.</span> <span class="toc-text">简单参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestParam%E6%B3%A8%E8%A7%A3%EF%BC%9A"><span class="toc-number">3.4.2.</span> <span class="toc-text">@RequestParam注解：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%92%8C%E9%9B%86%E5%90%88%E5%8F%82%E6%95%B0"><span class="toc-number">3.4.3.</span> <span class="toc-text">数组和集合参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%8F%82%E6%95%B0"><span class="toc-number">3.4.4.</span> <span class="toc-text">日期参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON%E5%8F%82%E6%95%B0%EF%BC%9A%E6%9C%80%E5%B8%B8%E8%A7%81%E7%9A%84%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92%E6%96%B9%E5%BC%8F"><span class="toc-number">3.4.5.</span> <span class="toc-text">JSON参数：最常见的前后端数据交互方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E5%8F%82%E6%95%B0"><span class="toc-number">3.4.6.</span> <span class="toc-text">路径参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">3.4.7.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94"><span class="toc-number">3.4.8.</span> <span class="toc-text">响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E8%A7%A3%E8%80%A6%E5%90%88"><span class="toc-number">3.4.9.</span> <span class="toc-text">分层解耦合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E8%A7%A3%E8%80%A6"><span class="toc-number">3.4.10.</span> <span class="toc-text">分层解耦</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%EF%BC%9A%E9%AB%98%E5%86%85%E8%81%9A%E4%BD%8E%E8%80%A6%E5%90%88"><span class="toc-number">3.4.10.0.1.</span> <span class="toc-text">软件设计原则：高内聚低耦合</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%EF%BC%9AIOC%EF%BC%8C"><span class="toc-number">3.4.10.0.2.</span> <span class="toc-text">控制反转：IOC，</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%EF%BC%9ADI%EF%BC%8C"><span class="toc-number">3.4.10.0.3.</span> <span class="toc-text">依赖注入：DI，</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#IOC-%E8%AF%A6%E8%A7%A3"><span class="toc-number">3.4.10.0.4.</span> <span class="toc-text">IOC 详解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F"><span class="toc-number">3.4.10.0.5.</span> <span class="toc-text">组件扫描</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E8%AF%A6%E8%A7%A3DI%EF%BC%9A"><span class="toc-number">3.4.10.0.6.</span> <span class="toc-text">依赖注入详解DI：</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.</span> <span class="toc-text">数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%EF%BC%9A"><span class="toc-number">4.1.</span> <span class="toc-text">SQL：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="toc-number">4.1.0.1.</span> <span class="toc-text">表操作：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">4.1.0.2.</span> <span class="toc-text">约束：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E8%A1%A8%E6%B5%81%E7%A8%8B"><span class="toc-number">4.1.0.2.1.</span> <span class="toc-text">设计表流程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%EF%BC%9ADML"><span class="toc-number">4.1.0.3.</span> <span class="toc-text">数据库操作：DML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%EF%BC%9ADQL"><span class="toc-number">4.1.0.4.</span> <span class="toc-text">数据库操作：DQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#select"><span class="toc-number">4.1.0.5.</span> <span class="toc-text">select</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.1.0.6.</span> <span class="toc-text">外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A"><span class="toc-number">4.1.0.6.1.</span> <span class="toc-text">多对多</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="toc-number">4.1.0.7.</span> <span class="toc-text">多表查询：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0%EF%BC%8C%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">4.1.0.8.</span> <span class="toc-text">单行函数，聚合函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.1.0.9.</span> <span class="toc-text">子查询</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E7%89%A9"><span class="toc-number">4.1.1.</span> <span class="toc-text">事物</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E7%89%A9%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="toc-number">4.1.1.1.</span> <span class="toc-text">事物的四大特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%EF%BC%9Aindex%EF%BC%9A"><span class="toc-number">4.1.1.2.</span> <span class="toc-text">索引：index：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%B7%B1%E5%81%9ASQL%E6%97%B6%E5%80%99%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AE%AD%E7%BB%83"><span class="toc-number">4.1.2.</span> <span class="toc-text">自己做SQL时候的一些训练</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MyBatis"><span class="toc-number">5.</span> <span class="toc-text">MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">5.0.1.</span> <span class="toc-text">mybatis快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JDBC%EF%BC%9AJava-DataBase-Connectivity"><span class="toc-number">5.0.1.1.</span> <span class="toc-text">JDBC：Java DataBase Connectivity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">5.0.1.2.</span> <span class="toc-text">数据库连接池</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A7%E5%93%81%EF%BC%9A%E5%B8%B8%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">5.0.1.3.</span> <span class="toc-text">产品：常用的数据库连接池</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lombok"><span class="toc-number">5.0.2.</span> <span class="toc-text">lombok</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis%E7%9A%84%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C"><span class="toc-number">5.1.</span> <span class="toc-text">Mybatis的基础操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E8%BE%93%E5%85%A5"><span class="toc-number">5.1.0.1.</span> <span class="toc-text">日志输入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%84%E7%BC%96%E8%AF%91SQL"><span class="toc-number">5.1.0.2.</span> <span class="toc-text">预编译SQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5"><span class="toc-number">5.1.0.3.</span> <span class="toc-text">SQL注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-number">5.1.0.4.</span> <span class="toc-text">参数占位符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MyBatista%E7%9A%84XML%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.1.0.5.</span> <span class="toc-text">MyBatista的XML配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mybatis%E5%8A%A8%E6%80%81SQL"><span class="toc-number">5.1.0.6.</span> <span class="toc-text">Mybatis动态SQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E7%9A%84%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E4%B8%8E%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-number">5.1.0.7.</span> <span class="toc-text">案例的开发规范与开发流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83-REST"><span class="toc-number">5.1.0.8.</span> <span class="toc-text">开发规范-REST</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83-%E7%BB%9F%E4%B8%80%E5%93%8D%E5%BA%94%E6%B5%81%E7%A8%8B"><span class="toc-number">5.1.0.9.</span> <span class="toc-text">开发规范-统一响应流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%8A%9F%E8%83%BD"><span class="toc-number">5.1.0.10.</span> <span class="toc-text">文件上传功能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.1.1.</span> <span class="toc-text">配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.1.1.1.</span> <span class="toc-text">yml配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81%EF%BC%9A"><span class="toc-number">5.1.1.2.</span> <span class="toc-text">登录认证：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E9%99%86%E6%A0%A1%E9%AA%8C"><span class="toc-number">5.1.1.3.</span> <span class="toc-text">登陆校验</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF"><span class="toc-number">5.1.1.4.</span> <span class="toc-text">会话技术</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%B8%80%EF%BC%9Acookie"><span class="toc-number">5.1.1.4.1.</span> <span class="toc-text">方案一：cookie</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%BA%8C%EF%BC%9ASession%E4%BC%9A%E8%AF%9D%E8%B7%9F%E8%B8%AA"><span class="toc-number">5.1.1.4.2.</span> <span class="toc-text">方案二：Session会话跟踪</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%B8%89%EF%BC%9A%E4%BB%A4%E7%89%8C%E6%8A%80%E6%9C%AF"><span class="toc-number">5.1.1.4.3.</span> <span class="toc-text">方案三：令牌技术</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JWT%E4%BB%A4%E7%89%8C%EF%BC%9AJSON-Web-Token"><span class="toc-number">5.1.1.5.</span> <span class="toc-text">JWT令牌：JSON Web Token</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8Filter"><span class="toc-number">5.1.1.6.</span> <span class="toc-text">过滤器Filter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E9%99%86%E6%A0%A1%E9%AA%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">5.1.1.7.</span> <span class="toc-text">登陆校验流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">5.1.2.</span> <span class="toc-text">拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">5.1.3.</span> <span class="toc-text">异常处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86-AOP"><span class="toc-number">5.2.</span> <span class="toc-text">事务管理&amp;AOP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E7%89%A9%E8%BF%9B%E9%98%B6%EF%BC%9A"><span class="toc-number">5.2.1.</span> <span class="toc-text">事物进阶：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AOP%EF%BC%9A%E9%9D%A2%E7%9B%B8%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B"><span class="toc-number">5.2.2.</span> <span class="toc-text">AOP：面相切面编程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AOP%E7%9A%84%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%9A"><span class="toc-number">5.2.2.1.</span> <span class="toc-text">AOP的快速入门：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AOP%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%EF%BC%9A"><span class="toc-number">5.2.3.</span> <span class="toc-text">AOP的核心概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AOP%E8%BF%9B%E9%98%B6"><span class="toc-number">5.2.4.</span> <span class="toc-text">AOP进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">5.2.4.1.</span> <span class="toc-text">3.切入点表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#annotation"><span class="toc-number">5.2.4.2.</span> <span class="toc-text">@annotation</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4%E8%BF%9E%E6%8E%A5%E7%82%B9"><span class="toc-number">5.2.5.</span> <span class="toc-text">3.4连接点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Springboot%E5%8E%9F%E7%90%86"><span class="toc-number">5.2.6.</span> <span class="toc-text">Springboot原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">5.2.6.1.</span> <span class="toc-text">1.配置文件的优先级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Bean%E7%AE%A1%E7%90%86"><span class="toc-number">5.2.6.2.</span> <span class="toc-text">2.Bean管理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Springboot%E5%8E%9F%E7%90%86"><span class="toc-number">5.2.7.</span> <span class="toc-text">3.Springboot原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96%EF%BC%9A"><span class="toc-number">5.2.7.1.</span> <span class="toc-text">3.1起步依赖：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%EF%BC%9A"><span class="toc-number">5.2.7.2.</span> <span class="toc-text">3.2自动配置：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%9A%E6%BA%90%E7%A0%81%E8%B7%9F%E8%B8%AA"><span class="toc-number">5.2.8.</span> <span class="toc-text">3.3原理分析：源码跟踪</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89starter%E5%88%86%E6%9E%90"><span class="toc-number">5.2.9.</span> <span class="toc-text">案例：自定义starter分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-number">5.3.</span> <span class="toc-text">web开发总结：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Maven%E9%AB%98%E7%BA%A7"><span class="toc-number">6.</span> <span class="toc-text">Maven高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%86%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%BC%80%E5%8F%91"><span class="toc-number">6.0.1.</span> <span class="toc-text">1.分模块设计与开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BB%A7%E6%89%BF%E4%B8%8E%E8%81%9A%E5%90%88"><span class="toc-number">6.0.2.</span> <span class="toc-text">2.继承与聚合</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1%E7%BB%A7%E6%89%BF"><span class="toc-number">6.0.2.1.</span> <span class="toc-text">2.1继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2%E7%89%88%E6%9C%AC%E9%94%81%E5%AE%9A"><span class="toc-number">6.0.2.2.</span> <span class="toc-text">2.2版本锁定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3%E8%81%9A%E5%90%88"><span class="toc-number">6.0.2.3.</span> <span class="toc-text">2.3聚合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E7%BB%A7%E6%89%BF%E4%B8%8E%E8%81%9A%E5%90%88%E5%AF%B9%E6%AF%94"><span class="toc-number">6.0.3.</span> <span class="toc-text">2.3 继承与聚合对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%A7%81%E6%9C%8D"><span class="toc-number">6.1.</span> <span class="toc-text">3.私服</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/05/24/Interviews/JavaSE/" title="java基础面试题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_11.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java基础面试题"/></a><div class="content"><a class="title" href="/2024/05/24/Interviews/JavaSE/" title="java基础面试题">java基础面试题</a><time datetime="2024-05-24T04:36:06.000Z" title="发表于 2024-05-24 12:36:06">2024-05-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/24/Interviews/Mybatis/" title="Mybatis面试题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_12.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mybatis面试题"/></a><div class="content"><a class="title" href="/2024/05/24/Interviews/Mybatis/" title="Mybatis面试题">Mybatis面试题</a><time datetime="2024-05-24T04:34:33.000Z" title="发表于 2024-05-24 12:34:33">2024-05-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/24/Interviews/Mysql/" title="Mysql面试题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_2.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mysql面试题"/></a><div class="content"><a class="title" href="/2024/05/24/Interviews/Mysql/" title="Mysql面试题">Mysql面试题</a><time datetime="2024-05-24T04:32:58.000Z" title="发表于 2024-05-24 12:32:58">2024-05-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/24/Interviews/MQ/" title="RabbitMQ面试题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_10.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RabbitMQ面试题"/></a><div class="content"><a class="title" href="/2024/05/24/Interviews/MQ/" title="RabbitMQ面试题">RabbitMQ面试题</a><time datetime="2024-05-24T04:32:13.000Z" title="发表于 2024-05-24 12:32:13">2024-05-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/24/Interviews/Redis/" title="Redis面试题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_22.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis面试题"/></a><div class="content"><a class="title" href="/2024/05/24/Interviews/Redis/" title="Redis面试题">Redis面试题</a><time datetime="2024-05-24T04:30:38.000Z" title="发表于 2024-05-24 12:30:38">2024-05-24</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_10.webp')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 方圆</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async data-pjax src="/js/txmap.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="http://www.mfyuan.top/categories/java/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📚 小方の编程笔记 (10)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="http://www.mfyuan.top/categories/project/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🎮 小方の项目学习 (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="http://www.mfyuan.top/categories/力扣/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🐱‍👓 小方の刷题笔记 (8)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="http://www.mfyuan.top/categories/生活/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">👩‍💻 小方の生活趣事 (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="http://www.mfyuan.top/categories/笔试/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">💡 小方の笔试记录 (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="http://www.mfyuan.top/categories/面试/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 小方の面试记录 (8)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="http://www.mfyuan.top/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #F5F5DC;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #69e8f2}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/04/07/Java/Redis/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_4.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-04-07</span><a class="blog-slider__title" href="2024/04/07/Java/Redis/" alt="">Redis</a><div class="blog-slider__text">自己在学习Redis知识时候记得一些笔记， 它用Redis实现了短信登录，缓存查询，优惠券秒杀，附近商户，UV统计，用户签到，好友关注，达人探店等功能</div><a class="blog-slider__button" href="2024/04/07/Java/Redis/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/03/25/Java/JavaWeb/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_10.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-03-25</span><a class="blog-slider__title" href="2024/03/25/Java/JavaWeb/" alt="">JavaWeb笔记</a><div class="blog-slider__text">自己在学习web知识时候记得一些笔记， 它打通了从前端 =&gt; MySQL =&gt; Java Web =&gt; SSM =&gt; Spring Boot =&gt; Maven 这一套技术栈</div><a class="blog-slider__button" href="2024/03/25/Java/JavaWeb/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/04/20/Interviews/baguwen/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_17.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-04-20</span><a class="blog-slider__title" href="2024/04/20/Interviews/baguwen/" alt="">面试总结</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2024/04/20/Interviews/baguwen/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/04/04/Java/java集合/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://web-fangyuan.oss-cn-hangzhou.aliyuncs.com/picture/Saved%20Pictures/default_cover_29.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-04-04</span><a class="blog-slider__title" href="2024/04/04/Java/java集合/" alt="">Java集合常用方法</a><div class="blog-slider__text">总结的Java集合常用方法，刷题前看看</div><a class="blog-slider__button" href="2024/04/04/Java/java集合/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/03/26/life/taiziwan/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/img_taiziwan_cover.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-03-26</span><a class="blog-slider__title" href="2024/03/26/life/taiziwan/" alt="">太子湾+法喜寺游记</a><div class="blog-slider__text">一篇流水账</div><a class="blog-slider__button" href="2024/03/26/life/taiziwan/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --></body></html>